(this["webpackJsonp@livechat/chat-widget"]=this["webpackJsonp@livechat/chat-widget"]||[]).push([[4],{695:function(e,t,n){"use strict";n.r(t);var r=n(3),i=n(0),o=n(31),a=n(27),c=n(7),l=n(9),s=n(1),u=n(43),d=n(2),f=n(5),b=n(485),m=n(100),p=n(136),g=(n(61),n(14)),h=n(227),v=n(6),j=n(12),O=n(484),x=function(e,t){var n=new Date(e);return n.toLocaleDateString()===(new Date).toLocaleDateString()?t.today(n):function(e){var t=new Date;return t.setDate(t.getDate()-1),e.toLocaleDateString()===t.toLocaleDateString()}(n)?t.yesterday(n):n.toLocaleDateString([],{year:"numeric",month:"2-digit",day:"2-digit"})},y=function(){return"IntersectionObserver"in window&&"IntersectionObserverEntry"in window},w=function(e,t,n){var r=Object(d.Db)(t).sort((function(e,t){return e.timestamp-t.timestamp})),i=Object(d.q)((function(t){return t.node===e}),r);if(i>-1)return{currentTimestamp:r[i].timestamp,previousTimestamp:i>0?r[i-1].timestamp:n}},k=function(e,t){var n=i.useRef({beginingOfTime:t,currentTimestamp:0,subscribers:[],dividers:{}}),r=function(e){var t={timestamp:e,direction:e>n.current.currentTimestamp?"down":"up"};n.current.currentTimestamp=e,n.current.subscribers.forEach((function(e){return e(t)}))},o=function(e){var t=e.rootRef,n=e.rootMargin,r=e.threshold,o=e.intersectionHandler;if(y()){var c=i.useRef(null),l=i.useRef([]),s=Object(a.l)(o);return i.useEffect((function(){return c.current=new IntersectionObserver((function(e,t){s.current&&s.current(e,t)}),{root:t.current,rootMargin:n,threshold:r}),l.current.forEach((function(e){return c.current.observe(e)})),l.current=[],function(){return c.current.disconnect()}}),[n,r,t,s]),Object(a.c)((function(){return{add:function(e){c.current?c.current.observe(e):l.current.push(e)},remove:function(e){c.current?c.current.unobserve(e):l.current=l.current.filter((function(t){return t!==e}))}}}))}}({rootRef:e,intersectionHandler:function(e){var t=function(e,t,n){var r=e.filter((function(e){return e.isIntersecting})).sort((function(e,t){return e.boundingClientRect.top-t.boundingClientRect.top}))[0];if(r){var i=w(r.target,t,n);return i&&i.previousTimestamp}var o=e.filter((function(e){return e.boundingClientRect.top<=e.rootBounds.top})).sort((function(e,t){return e.boundingClientRect.top-t.boundingClientRect.top})).reverse()[0];if(o){var a=w(o.target,t,n);return a&&a.currentTimestamp}}(e,n.current.dividers,n.current.beginingOfTime);t&&r(t)},threshold:.2});return i.useEffect((function(){var e=Object(d.Db)(n.current.dividers).map((function(e){return e.timestamp})),t=Math.max.apply(Math,e.concat([n.current.beginingOfTime]));n.current.currentTimestamp=t,n.current.subscribers.forEach((function(e){return e({timestamp:t,direction:"up"})}))}),[]),Object(a.c)((function(){return{add:function(e){n.current.dividers[e.timestamp]=e,o&&o.add(e.node)},remove:function(e){o&&o.remove(e.node),delete n.current.dividers[e.timestamp]},subscribe:function(e){n.current.subscribers.push(e)},unsubscribe:function(e){n.current.subscribers=n.current.subscribers.filter((function(t){return t!==e}))},setBeginingOfTime:function(e){n.current.beginingOfTime=e},currentTimestamp:function(){return n.current.currentTimestamp},setToNewestTimestamp:function(){var e=Object.keys(n.current.dividers).map(Number).sort((function(e,t){return t-e}))[0];r(e)}}}))},E=i.createContext(null),A=function(){return i.useContext(E)},C=function(e){var t=e.children,n=e.rootRef,r=e.beginingOfTime,o=e.isOnBottomSource,a=k(n,null!=r?r:0);return i.useEffect((function(){a.setBeginingOfTime(null!=r?r:0)})),i.useEffect((function(){return o.subscribe((function(e){e&&a.setToNewestTimestamp()}))}),[o,a]),i.createElement(E.Provider,{value:a},t)};var S=Object(f.A)("span",{displayName:"DividerLabel",target:"eceo2x80"})({name:"1rpc86p",styles:"padding:4px 8px;font-size:12px;position:relative;padding:0 8px;&:before,&:after{content:'';width:50vw;height:0;border-top:1px solid;border-top-color:inherit;position:absolute;top:50%;}&:before{right:100%;}&:after{left:100%;}"});function T(){var e=Object(j.a)(["\n\t&-enter ",", &-exit "," {\n\t\tposition: relative;\n\t}\n\n\t&-enter "," {\n\t\ttop: ",";\n\t}\n\t&-enter-active "," {\n\t\ttop: 0;\n\t\ttransition: top ","ms ease-out;\n\t}\n\n\t&-exit {\n\t\topacity: 1;\n\t}\n\t&-exit-active {\n\t\topacity: 0;\n\t\ttransition: opacity ","ms ease-out;\n\t}\n\n\t&-exit "," {\n\t\ttop: 0;\n\t\tposition: relative;\n\t}\n\t&-exit-active "," {\n\t\ttop: ",";\n\t\ttransition: top ","ms ease-out;\n\t}\n"]);return T=function(){return e},e}var _={name:"sx4ymz",styles:"opacity:0;pointer-events:none"},z=Object(f.A)(S,{target:"e1g4em791"})("color:",(function(e){return e.theme.colors.primaryTextColor}),";overflow:hidden;border:1px solid ",(function(e){return e.theme.colors.divider}),";background-color:",(function(e){return e.theme.colors.surface}),";border-radius:",(function(e){return e.theme.borderRadius.md}),";padding:2px 6px;transition:opacity 150ms linear;",(function(e){return!e.visible&&_}),";"),I=Object(f.A)("span",{target:"e1g4em790"})(""),R=200;var M=y()?function(e){var t=e.isUserScrollingSource,n=Object(v.a)(e,["isUserScrollingSource"]),c=Object(a.v)(t),l=A(),u=i.useState({direction:"up",timestamp:l.currentTimestamp()}),d=u[0],f=u[1];return i.useEffect((function(){l.subscribe(f);var e=l.currentTimestamp();return e!==d.timestamp&&f({direction:"up",timestamp:e}),function(){return l.unsubscribe(f)}}),[l]),d.timestamp?i.createElement(o.a,null,(function(e){var t=x(d.timestamp,{today:function(){return e("today")},yesterday:function(){return e("yesterday")}});return i.createElement(r.a,null,(function(e){var r=function(e,t){return e(T(),String(I),String(I),String(I),"up"===t?"-2em":"2em",String(I),R,R,String(I),String(I),"up"===t?"2em":"-2em",R)}(e.css,d.direction);return i.createElement(b.a,{component:null,childFactory:function(e){return i.cloneElement(e,{classNames:r})}},i.createElement(O.a,{key:t,classNames:r,timeout:R},i.createElement(z,Object(s.a)({},n,{visible:c}),i.createElement(I,null,t))))}))})):null}:function(){return null},P=function(e){var t=A();i.useEffect((function(){var n={timestamp:e.timestamp,node:e.nodeRef.current};return t.add(n),function(){t.remove(n)}}),[])};var F=Object(f.A)("div",{target:"ehmqpie0"})({name:"1wai6wj",styles:"height:20px;margin:16px -0.5em;text-align:center;overflow:hidden"}),D=function(e){var t=e.timestamp,n=i.useRef(null);return P({timestamp:t,nodeRef:n}),i.createElement(o.a,null,(function(e){return i.createElement(F,{ref:n},i.createElement(S,null,x(t,{today:function(e){return e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},yesterday:function(){return e("yesterday")}})))}))},B=n(26);var q=Object(f.A)("div",{displayName:"NewMessageHorizontalDivider",target:"eacid5n1"})({name:"gbe43y",styles:"height:27px;margin:16px -0.5em;text-align:center;overflow:hidden"}),H=Object(f.A)(B.V,{target:"eacid5n0"})({name:"1c0l2b2",styles:"display:inline-flex;padding:2px 12px;font-weight:normal;box-shadow:none;height:auto;&:before,&:after{border-top:0;}"}),L=function(e){var t=e.unseenCount,n=e.setScrollTargetNode,r=i.useRef(null),c=i.useState(!0),l=c[0],s=c[1];return Object(a.n)((function(){r.current&&n(r.current)})),i.useEffect((function(){var e=setTimeout((function(){return s(!1)}),625);return function(){return clearTimeout(e)}}),[]),i.createElement(o.a,null,(function(e){return i.createElement(q,{ref:r},i.createElement(H,{animated:l,minScale:.9,maxScale:1.05},e(1===t?"new_message":"new_messages")))}))},U=n(16),N=Object(f.A)("div",{target:"ekfrplk0"})((function(e){return e.theme.typography.basic})," color:",(function(e){return e.theme.colors.textPrimary}),";line-height:1.2;color:inherit;display:flex;width:100%;flex-direction:",(function(e){return e.row?"row":"column"}),";"),V=n(89),W=n(685),G=n(18),Y=n(130),J=n(692),K=n(13),Q=n(661),X=n(62),Z=n.n(X),$=function(e,t){return t.getElementById(e)},ee=function(e){var t=e.portalId,n=void 0===t?Q.a:t,r=e.children,o=Object(V.useFrame)().document,a=i.useState((function(){return $(n,o)})),c=a[0],l=a[1];return i.useEffect((function(){var e=$(n,o);e&&e!==c&&l(e)}),[c,n,o]),c?X.createPortal(r,c):null};var te=10,ne=Object(f.A)("div",{displayName:"Tooltip",target:"ezqijrk2"})("display:inline-block;background-color:",(function(e){var t=e.theme,n=e.kind;return t.colors[n+"Surface"]}),";color:",(function(e){var t=e.theme;return"hint"===e.kind?t.colors.grayscale[0]:t.colors.primaryTextColor}),";padding:1em;position:fixed;border-radius:",(function(e){return e.theme.borderRadius.lg}),";z-index:9;font-size:0.8em;font-weight:normal;margin-top:0.5em;margin-bottom:0.5em;box-shadow:",(function(e){return e.theme.boxShadow.floating}),";transition:",(function(e){var t=e.theme;return"opacity 200ms "+t.transitions.easings.swift+", transform 300ms "+t.transitions.easings.swift}),";",(function(e){var t=e.position;return{left:t.left?t.left-te+"px":"auto",right:t.right?t.right-te+"px":"auto",top:t.top?t.top+"px":"auto",bottom:t.bottom?t.bottom:"auto",marginRight:t.right?0:"10px",marginLeft:t.left?0:"10px"}}),";"),re=Object(f.A)("svg",{displayName:"TooltipArrow",target:"ezqijrk1"})("position:absolute;fill:",(function(e){var t=e.theme,n=e.kind;return t.colors[n+"Surface"]}),";margin-top:-1.5em;margin-bottom:-1.5em;",(function(e){var t=e.position,n=e.horizontalFactor,r=e.placement,i=void 0===r?"top":r,o=e.theme;return Object(s.a)({left:t.left?n-te+("modern"===o.name?3:-1)+"px":"auto",right:t.right?n-te+("modern"===o.name?3:-1)+"px":"auto"},"bottom"===i?{top:0}:{bottom:0,transform:"rotate(180deg)"})}),";"),ie=Object(f.A)("div",{target:"ezqijrk0"})({name:"bjn8wh",styles:"position:relative"}),oe=function(e,t,n){var r=e.getBoundingClientRect(),i=r.left,o=r.right,a=r.bottom,c=r.top,l=n.window,u=l.innerWidth,d=l.innerHeight,f=l.pageXOffset,b=l.pageYOffset,m="top"===t?{bottom:d-(c+b)}:{top:a+b},p=i+f>u/2?{right:u-(o+f)}:{left:i+f};return Object(s.a)({},m,p)},ae={position:{top:0,left:0},targetWidth:0};var ce=function(e){var t=e.children,n=e.description,r=e.allowTouch,o=e.controlsRef,c=e.animated,l=void 0!==c&&c,u=e.placement,f=void 0===u?"bottom":u,b=e.trigger,m=void 0===b?"hover":b,p=e.onOpenChange,g=void 0===p?d.W:p,h=e.kind,j=void 0===h?"hint":h,O=Object(v.a)(e,["children","description","allowTouch","controlsRef","animated","placement","trigger","onOpenChange","kind"]),x=i.useRef(null);Object(G.k)();var y=i.useRef(null),w=i.useRef(!1),k=i.useState(ae),E=k[0],A=k[1],C=i.useState(!1),S=C[0],T=C[1],_=Object(V.useFrame)(),z=Object(J.a)(Object(s.a)({onOpenChange:function(e){l&&requestAnimationFrame((function(){return T(e)}));var t=function(){g(e,w.current),w.current=!1};e?(A({position:oe(y.current,f,_),targetWidth:y.current.offsetWidth}),requestAnimationFrame(t)):t()}},O));(null==o?void 0:o.current)&&(o.current={open:function(){w.current=!0,z.open(!0)},close:function(){w.current=!0,z.close(!0)}});var I,R=Object(W.b)(O,z,y),M=R.tooltipProps,P=R.triggerProps,F=Object(W.a)(M,z).tooltipProps,D=Object(G.m)({onPress:function(){z.open(!0)}}).pressProps;return Object(a.m)(x,(function(e){y.current.contains(e.target)||z.close(!0)}),_),O.isDisabled&&z.isOpen&&z.close(),i.createElement(Y.b,Object(s.a)({},"press"===m?D:r?Object(K.h)(P,D):P,{ref:y}),t,z.isOpen&&i.createElement(ee,{portalId:Q.b},i.createElement(ne,Object(s.a)({ref:x,position:E.position,kind:j},"hover"===m&&F,l&&{style:{opacity:(I=S)?1:0,transform:"translateY("+(I?0:8)+"px)"}}),i.createElement(ie,null,i.createElement(re,{placement:f,kind:j,horizontalFactor:E.targetWidth/2,height:"10",position:E.position,width:"16"},i.createElement("polygon",{points:"0,10 16,10 8,0"})),n))))},le=n(673),se=n(265);function ue(){var e=Object(j.a)(["\n\t&-enter,\n\t&-appear {\n\t\tbackground-color: rgba(0, 0, 0, 0);\n\t}\n\n\t&-enter-active,\n\t&-appear-active,\n\t&-enter-done,\n\t&-appear-done {\n\t\tbackground-color: ",";\n\t\ttransition: background-color ","ms ",";\n\t}\n\n\t&-exit {\n\t\tbackground-color: ",";\n\t}\n\n\t&-exit-active,\n\t&-exit-done {\n\t\tbackground-color: rgba(0, 0, 0, 0);\n\t\ttransition: background-color ","ms ",";\n\t\ttransition-delay: ","ms;\n\t}\n"]);return ue=function(){return e},e}var de=300,fe=function(e){return{enter:de,exit:e+de}},be=function(e){return"light"===e?"rgba(0, 0, 0, 0.5)":"rgba(0, 0, 0, 0.7)"},me=function(e,t,n){return e(ue(),be(n.variant),de,n.transitions.easings.smooth,be(n.variant),de,n.transitions.easings.smooth,t)},pe=function(e){var t=e.zIndex;return Object(r.c)("z-index:",t,";position:absolute;top:0;left:0;right:0;bottom:0;border-radius:inherit;")},ge=function(e){var t=e.zIndex,n=Object(v.a)(e,["zIndex"]),o=i.useRef(null);return Object(a.f)("touchmove",o),Object(r.d)("div",Object(s.a)({ref:o,css:pe({zIndex:t})},n))},he=function(e){var t=e.shown,n=e.onPress,i=e.exitDelay,o=void 0===i?100:i,a=e.zIndex,c=void 0===a?999:a,l=Object(G.m)({onPress:n}).pressProps;return Object(r.d)(r.a,null,(function(e){var n=e.css,i=e.theme;return Object(r.d)(b.a,{appear:!0,component:null},t&&Object(r.d)(O.a,{classNames:me(n,o,i),timeout:fe(o)},Object(r.d)(ge,Object(s.a)({zIndex:c},l))))}))},ve=i.memo(he),je=n(57),Oe=n(169);var xe={name:"jubs0u",styles:"margin:0;background:transparent"},ye=function(e){return Object(r.c)("position:absolute;z-index:1500;width:calc(100% - 2rem);max-width:290px;top:1em;left:50%;color:",e.colors.primaryTextColor,";background:",e.colors.surface,";box-shadow:",e.boxShadow.lg,";padding:",1*e.spaceBase,"px;border-radius:",e.borderRadius.xl,";")},we=Object(f.A)("div",{target:"e1yhh5l71"})({name:"4hray5",styles:"display:flex;flex-direction:row-reverse"}),ke=Object(f.A)("div",{target:"e1yhh5l70"})("padding:",(function(e){return 1*e.theme.spaceBase}),"px;padding-top:0;"),Ee=i.forwardRef((function(e,t){var n=e.onClose,i=void 0===n?d.W:n,o=e.children,a=e["aria-label"],c=e["aria-labelledby"],l=e.isPreview,u=Object(v.a)(e,["onClose","children","aria-label","aria-labelledby","isPreview"]);Object(se.d)({isDisabled:l});var f=Object(se.c)({isOpen:!0,isDismissable:!0,onClose:i},t).overlayProps,b=Object(se.b)().modalProps,m=Object(le.a)({"aria-label":a,"aria-labelledby":c},t).dialogProps;return Object(r.d)(Y.a,{contain:!0,autoFocus:!0,restoreFocus:!0},Object(r.d)("div",Object(s.a)({},Object(K.h)(u,f,b,m),{ref:t,css:ye}),Object(r.d)(we,null,Object(r.d)(B.s,{css:xe,onPress:i,"aria-label":"Close modal"},Object(r.d)(B.h,{"aria-hidden":!0}))),Object(r.d)(ke,null,o)))})),Ae=function(e){var t=e.onClose,n=void 0===t?d.W:t,o=e.shown,a=e.children,c=Object(v.a)(e,["onClose","shown","children"]),l=i.useRef(null),u=Object(je.b)(),f=Object(Oe.b)();return i.useEffect((function(){return f.setModalOpen(o)}),[o,f]),Object(r.d)(ee,null,Object(r.d)(ve,{shown:o,onPress:n,exitDelay:25}),Object(r.d)(b.a,{component:null},o&&Object(r.d)(h.b,{nodeRef:l},Object(r.d)(Ee,Object(s.a)({onClose:n,ref:l,isPreview:u},c),a))))},Ce=n(662),Se=n(665);var Te=Object(f.A)("div",{target:"e1lbo1s41"})({name:"175oc9c",styles:"display:flex;justify-content:center;flex-shrink:0"}),_e=Object(f.A)("div",{displayName:"IconLabel",target:"e1lbo1s40"})("display:flex;justify-content:center;align-items:center;",(function(e){var t=e.size,n=e.theme;return{width:t,height:t,borderRadius:n.borderRadius.round,backgroundColor:n.colors.surfaceDecorative}}),";"),ze=function(e){var t=e.size,n=void 0===t?"64px":t,r=e.children,o=Object(v.a)(e,["size","children"]);return i.createElement(Te,null,i.createElement(_e,Object(s.a)({size:n},o),r))};var Ie="add_rate_comment_label",Re={name:"1azakc",styles:"text-align:center"},Me=Object(o.c)((function(e,t){var n=t.chatId,r=t.show,i=t.selectedRate,o=e.getApplicationState("isPreview"),a=o?function(){return Promise.resolve()}:function(t){var r=t.comment,i={};return void 0!==r&&(i.rateComment=r),e.requestUpdateChat(n,{properties:i})};return{selectedRate:i,show:r,mobile:e.getApplicationState("mobile"),rateChat:a,localize:e.localize,isPreview:o}}))((function(e){var t=e.rateChat,n=e.selectedRate,i=e.show,o=e.localize,a=e.isPreview,c=e.mobile,l=e.onClose,s=e.onSubmit;return Object(r.d)(Ae,{shown:i,onClose:l},Object(r.d)(ze,null,"good"===n?Object(r.d)(B.S,{label:o("rate_me_confirmation_good")}):Object(r.d)(B.R,{label:o("rate_me_confirmation_bad")})),Object(r.d)("p",{id:Ie,css:Re},o("rate_me_add_comment")),Object(r.d)(Ce.a,{id:"rate_comment",mobile:c,onSubmit:function(e){t({comment:e.comment}),s()},submitLabel:o("button_add_feedback"),validate:function(e){return e.comment?{}:{comment:o("survey_fill_in_required_fields")}},disabled:a},Object(r.d)(f.q,null,Object(r.d)(Se.a,{label:"",serverName:"",type:"textarea",name:"comment",localize:function(){return o("rate_me_placeholder")},ariaLabelledBy:Ie,required:!0}))))}));var Pe={name:"870gjp",styles:"font-size:inherit"},Fe={name:"l3iapi",styles:"margin-right:6px;margin-left:0"},De=Object(f.A)(B.s,{target:"e1mt5al70"})("&:hover{background-color:",(function(e){return e.theme.colors.lighterOppositeTitleBarColor}),";}",(function(e){var t=e.theme;return t.isRtl&&"smooth"===t.name&&Fe}),";"),Be=Object(o.c)((function(e,t){var n=t.chatId,r=t.variant,i=t.source,o=t.onRatingCommentModalStateChange,a=e.getApplicationState("isPreview"),c=a?function(){return Promise.resolve()}:function(t){var r=t.rate,o={};return void 0!==r&&(o.rate=r),e.requestUpdateChat(n,{properties:o},{source:i})};return function(e){var t=e.getChat(n),i=t.active,l=t.properties,s=l.ended;return{chatRate:l.rate,disabled:!a&&(!s&&!i),rateChat:c,localize:e.localize,variant:r,chatId:n,onRatingCommentModalStateChange:o}}}))((function(e){var t=e.chatId,n=e.chatRate,o=e.disabled,a=e.rateChat,c=e.localize,l=e.variant,s=void 0===l?"normal":l,u=e.onRatingCommentModalStateChange,d=i.useState(!1),f=d[0],b=d[1],m=i.useState(n),p=m[0],g=m[1],h=i.useCallback((function(e){return function(){var t=p===e,r=t?null:e;a({rate:r}).catch((function(){return g(n)})),g(r),b(!t)}}),[p,n,a]);i.useEffect((function(){g(n)}),[n]),i.useEffect((function(){u&&u(f)}),[f,u]);var v=function(){b(!1)},j=function(e){return{disabled:o,active:n===e,onPress:h(e),"aria-label":c(n===e?"cancel_"+e+"_rating":"rate_"+e+"_and_open_modal")}},O=c("good"===n?"rate_me_cancel_tooltip":"rate_me_good_tooltip"),x=c("bad"===n?"rate_me_cancel_tooltip":"rate_me_bad_tooltip");return Object(r.d)(i.Fragment,null,Object(r.d)(ce,{isDisabled:o,description:O},Object(r.d)(De,j("good"),"small"===s?Object(r.d)(B.N,{css:Pe,"aria-hidden":!0}):Object(r.d)(B.S,{css:Pe,"aria-hidden":!0}))),Object(r.d)(ce,{isDisabled:o,description:x},Object(r.d)(De,j("bad"),"small"===s?Object(r.d)(B.M,{css:Pe,"aria-hidden":!0}):Object(r.d)(B.R,{css:Pe,"aria-hidden":!0}))),Object(r.d)(Me,{show:f,onClose:v,onSubmit:v,selectedRate:p,chatId:t}))})),qe=n(53);var He=function(e){return{small:"24px",large:"56px"}[e]},Le=Object(f.A)("div",{target:"ekqutxs1"})({name:"v2yezz",styles:"display:flex;flex-grow:0;align-items:center;position:relative"}),Ue=Object(f.A)("div",{target:"ekqutxs0"})("position:absolute;",(function(e){var t=e.availability,n=e.size,r=e.theme;return{width:"small"===n?r.spaces.space4:r.spaces.space5,height:"small"===n?r.spaces.space4:r.spaces.space5,background:"online"===t?r.colors.success:r.colors.grayscale[500],border:"2px solid "+r.colors.surface,borderRadius:r.borderRadius.round,top:"large"===n&&"modern"!==r.name?"0":"-2px",left:"large"===n&&"modern"!==r.name?"0":"-2px"}}),";"),Ne=function(e){var t=e.avatarUrl,n=e.availability,i=e.size,o=void 0===i?"normal":i,a=Object(v.a)(e,["avatarUrl","availability","size"]);return Object(r.d)(Le,a,Object(r.d)(f.b,{imgUrl:t,size:He(o)}),n&&Object(r.d)(Ue,{availability:n,size:o}))};var Ve=Object(f.A)("div",{target:"e9ks4qw3"})("display:flex;align-items:center;justify-content:center;padding-left:",(function(e){return e.logoWithoutShift?"0":"25px"}),";margin-bottom:",(function(e){return e.modernDowngrade?"0":"10px"}),";&>*{margin-left:",(function(e){return e.logoWithoutShift?"0":"-15px"}),";}"),We=Object(f.A)("div",{target:"e9ks4qw2"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),Ge=Object(f.A)(ze,{target:"e9ks4qw1"})("background-color:",(function(e){return e.theme.colors.surfaceDecorative}),";color:",(function(e){return e.theme.colors.primaryTextColor}),";margin-top:-25px;margin-left:-25px;position:absolute;z-index:2000;"),Ye=Object(f.A)("div",{target:"e9ks4qw0"})("width:56px;height:56px;border-radius:",(function(e){return e.theme.borderRadius.round}),";overflow:hidden;display:flex;align-items:center;position:relative;z-index:2;background-color:",(function(e){return e.theme.colors.surface}),";box-shadow:0 0 0 2px ",(function(e){return e.theme.colors.agentBarBackground}),";img{width:100%;height:100%;object-fit:contain;}&::after{top:0;left:0;right:0;bottom:0;content:'';position:absolute;width:100%;height:100%;border-radius:",(function(e){return e.theme.borderRadius.round}),";box-shadow:inset 0px 0px 0px 1px rgba(143, 143, 143, 0.15);}"),Je=function(e){var t=e.avatarUrl,n=e.icon,o=e.logoUrl,a=e.showAvatar,c=void 0===a||a,l="modern"===Object(u.g)().name,s=i.useState(!l&&o),d=s[0],f=s[1];return Object(r.d)(Ve,{modernDowngrade:l,logoWithoutShift:l||!o||!c},n&&Object(r.d)(We,{"aria-hidden":!0},Object(r.d)(Ge,{size:"24px",isLight:!0},n)),c&&Object(r.d)(Ne,{size:"large",avatarUrl:t,availability:n?void 0:"online"}),d&&Object(r.d)(Ye,null,Object(r.d)("img",{alt:"Company logo",src:o,onError:function(){return f(!1)}})))};var Ke={name:"f7ay7b",styles:"justify-content:center"},Qe=Object(f.A)("div",{target:"e10kp68a3"})({name:"zov8s0",styles:"width:100%;display:flex;justify-content:center"}),Xe=Object(f.A)("div",{target:"e10kp68a2"})("display:flex;flex-direction:",(function(e){return e.verticalLayout?"row":"column"}),";justify-content:",(function(e){return e.verticalLayout?"flex-start":"center"}),";align-items:center;width:",(function(e){return e.verticalLayout?"100%":"auto"}),";max-width:100%;"),Ze={name:"xyzkeb",styles:"align-self:flex-start"},$e=Object(f.A)(f.w,{target:"e10kp68a1"})({name:"172op4w",styles:"margin-top:0;margin-bottom:0"}),et=Object(r.c)(Ke," min-width:auto;"),tt=Object(f.A)("img",{target:"e10kp68a0"})({name:"1lnnphj",styles:"height:auto;max-height:50px"}),nt=function(e){var t,n=e.agent,i=e.chatId,o=e.showAvatar,a=e.logoPath,c=e.isRatingEnabled,l="modern"===Object(u.g)().name;return Object(r.d)(Qe,null,Object(r.d)(Xe,{verticalLayout:l},Object(r.d)(Je,{logoUrl:a,showAvatar:o,avatarUrl:o?n.avatar:void 0}),Object(r.d)("div",{css:(t=l,Object(r.c)("margin-top:0;margin-bottom:",t?"0":"10px",";text-align:",t?"left":"center",";width:",t?"100%":"auto",";max-width:100%;min-width:0;",t&&Ze,";"))},Object(r.d)($e,{as:"h1",ellipsis:!0},Object(r.d)(qe.a,null,n.name)),n.properties.jobTitle&&Object(r.d)(f.s,{ellipsis:!0},Object(r.d)(qe.a,null,n.properties.jobTitle)),c&&l&&Object(r.d)(f.q,null,Object(r.d)(Be,{chatId:i,variant:"normal",source:"agent_bar"}))),c&&!l&&Object(r.d)(f.q,null,Object(r.d)(Be,{chatId:i,variant:"normal",source:"agent_bar"})),!!a&&l&&Object(r.d)(f.f,{css:et},Object(r.d)(tt,{alt:"",src:a,draggable:!1}))))},rt=n(151),it=n.n(rt),ot=n(214),at=n(150),ct=n(230),lt="top-bar";var st={name:"l3iapi",styles:"margin-right:6px;margin-left:0"},ut=Object(f.A)(B.s,{target:"eyohww45"})("width:24px;height:24px;opacity:1;background-color:",(function(e){var t=e.theme;return"modern"===t.name?"transparent":t.colors.lighterOppositeAgentBarColor}),";",(function(e){return e.theme.isRtl&&st}),";"),dt=Object(f.A)(B.f,{target:"eyohww44"})((function(e){return"up"===e.direction&&{transform:"rotate(180deg)"}})," transition:transform 0.3s ",(function(e){return e.theme.transitions.easings.swift}),";"),ft=Object(f.A)(N,{target:"eyohww43"})("display:flex;text-align:left;overflow:hidden;height:auto;width:100%;align-items:",(function(e){return e.veritcallyCenter?"center":"flex-start"}),";transition:height 0.3s ",(function(e){return e.theme.transitions.easings.swift}),";will-change:height;line-height:1.5;justify-content:center;a{color:inherit;}"),bt=Object(f.A)("div",{target:"eyohww42"})({name:"1kjhtaf",styles:"display:flex;align-items:flex-start;margin-top:10px"}),mt=Object(f.A)("div",{target:"eyohww41"})({name:"zjik7",styles:"display:flex"}),pt=Object(f.A)("div",{target:"eyohww40"})({name:"zigog8",styles:"display:flex;flex-direction:column;align-items:center"}),gt=function(e){var t=e.text,n=e.icon,a=e.isLoadingHistory,c=e.forceExpanded,l=e.forceCollapsed,s=e.isUploadDrawerVisible,d=e.logoPath,f=i.useState(!0),b=f[0],m=f[1],p=i.useState(!1),g=p[0],h=p[1],v=i.useState(!1),j=v[0],O=v[1],x=i.useState(null),y=x[0],w=x[1],k=i.useState(!1),E=k[0],A=k[1],C=i.useRef(null),S=Object(K.l)(),T=Object(u.g)().name,_="modern"===T?45:108,z=i.useCallback((function(e){var t=(void 0===e?{}:e).shouldKeepPrevious,n=void 0!==t&&t;if(b){var r=C.current.clientHeight;r!==y&&w(r),C.current.style.height=r+"px",C.current.scrollTop}C.current.style.height=(b?_:Number(y))+"px",n&&h(b),m((function(e){return!e}))}),[b,y,_]),I=function(){b&&(C.current.style.height="auto")},R=a&&b,M=l&&b,P=g&&!l&&!b&&!s;i.useEffect((function(){if(C&&!c){var e=C.current.clientHeight>_;O(e)}C&&c&&(C.current.style.height="auto",O(!1))}),[C,c,_]),i.useEffect((function(){j&&(w(C.current.clientHeight),C.current.style.height=_+"px",A(!0),m(!1))}),[j,_]),i.useEffect((function(){(R||M)&&z({shouldKeepPrevious:M})}),[z,R,M]),i.useEffect((function(){P&&(h(!1),z())}),[z,P]);var F=b||!j;return Object(r.d)(o.a,null,(function(e){return Object(r.d)(ft,{ref:C,row:!0,veritcallyCenter:!j,onTransitionEnd:I,textWrap:!0},Object(r.d)(pt,{css:F?"":Object(ct.a)(2),id:S},"modern"!==T&&Object(r.d)(Je,{logoUrl:d,icon:n}),Object(r.d)(mt,null,Object(r.d)(it.a,{component:at.a},Object(r.d)(ot.a,{template:t,limit:b?void 0:120,root:{component:qe.a}})),j&&Object(r.d)(bt,null,Object(r.d)(ut,{onPress:z,"aria-expanded":b,"aria-controls":S,"aria-label":e(b?"show_less":"show_more")},Object(r.d)(dt,{size:24,direction:E&&b?"up":"down","aria-hidden":!0}))))))}))},ht=n(22),vt={modern:42,smooth:56},jt=Object(f.A)("div",{target:"e8t2lg23"})("width:",(function(e){return e.isVisible?100:0}),"%;height:",(function(e){return e.isVisible?100:0}),"%;position:absolute;top:0;left:0;z-index:101;"),Ot=Object(f.A)("div",{target:"e8t2lg22"})("position:relative;top:",(function(e){return e.topOffset}),"px;left:0;width:100%;height:",(function(e){return"calc(100% - "+e.topOffset+"px)"}),";background-color:",(function(e){var t=e.theme;return Object(ht.g)(t.colors.surface,.93)}),";padding:",(function(e){return e.theme.spaces.space3}),";pointer-events:none;"),xt=Object(f.A)("div",{target:"e8t2lg21"})("display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;height:100%;border:2px dashed ",(function(e){return e.theme.colors.border}),";border-radius:",(function(e){return e.theme.borderRadius.lg}),";color:",(function(e){return e.theme.colors.primaryTextColor}),";"),yt=Object(f.A)("h1",{target:"e8t2lg20"})((function(e){return e.theme.typography.subheading}),";"),wt=Object(o.c)((function(e){return{uploadFile:function(t){return Object(g.e)(e,t,"drag")},hideDropArea:function(){return e.setApplicationState({dropAreaVisible:!1})},isVisible:e.getApplicationState("dropAreaVisible")}}))((function(e){var t=e.isVisible,n=e.uploadFile,r=e.hideDropArea,a=e.topBarHeight,c=i.useState(!1),l=c[0],s=c[1],d=Object(u.g)(),f=vt[d.name]+a,m=function(e){e.preventDefault(),e.stopPropagation()};return i.createElement(ee,null,i.createElement(jt,{onDragLeave:function(){r()},onDragOver:m,onDrop:function(e){var t;m(e);var i=null==(t=e.dataTransfer)?void 0:t.files;i&&Array.prototype.forEach.call(i,n),r()},isVisible:t||l},i.createElement(b.a,{appear:!0,component:null},t&&i.createElement(h.d,{length:300,onEnter:function(){return s(!0)},onExited:function(){return s(!1)}},i.createElement(Ot,{topOffset:f},i.createElement(xt,null,i.createElement(B.k,null),i.createElement(o.a,null,(function(e){return i.createElement(yt,null,e("drop_files_here"))}))))))))}));function kt(){var e=Object(j.a)(["\n\t&-enter,\n\t&-appear {\n\t\ttransform: translateY(-100%);\n\t}\n\n\t&-enter-active,\n\t&-appear-active,\n\t&-enter-done,\n\t&-appear-done {\n\t\ttransform: translateY(0);\n\t\ttransition: transform ","ms ",";\n\t}\n\n\t&-exit {\n\t\ttransform: translateY(0);\n\t\tposition: absolute;\n\t\tright: 0;\n\t\tleft: 0;\n\t}\n\n\t&-exit-active {\n\t\ttransform: translateY(-100%);\n\t\ttransition: transform ","ms ",";\n\t}\n"]);return kt=function(){return e},e}var Et=Object(f.A)(f.a,{target:"eraual4"})("position:relative;padding-top:",(function(e){return"modern"===e.theme.name?"0.6em":0}),";padding-bottom:",(function(e){var t=e.theme;return"modern"===t.name?"0.6em":t.spaces.space7}),";box-shadow:",(function(e){return e.theme.boxShadow.sm}),";"),At=Object(f.A)("div",{displayName:"TopBar",target:"eraual3"})("position:relative;height:auto;bottom:0;z-index:",(function(e){return e.elevate?102:1}),";pointer-events:",(function(e){return e.elevate?"none":"all"}),";@media (max-height: 330px){display:none;}"),Ct=Object(f.A)("div",{target:"eraual2"})("min-height:",(function(e){var t=e.theme;return"calc("+("modern"===t.name?45:108)+"px + "+t.AgentBar.css.padding}),");"),St={name:"1pc9iid",styles:"position:relative;box-shadow:none;padding:0"},Tt=Object(f.A)(f.a,{target:"eraual1"})("position:absolute;top:0;left:0;width:100%;padding-top:",(function(e){return"modern"===e.theme.name?".6em":0}),";box-shadow:",(function(e){return e.theme.boxShadow.sm}),";",(function(e){return e.collapsed&&St}),";"),_t=Object(f.A)("div",{target:"eraual0"})("position:relative;width:100%;z-index:",(function(e){var t=e.collapsed;return e.elevate?102:t?2:1}),";pointer-events:",(function(e){return e.elevate?"none":"all"}),";"),zt="cubic-bezier(0.14, 0, 0, 1)",It={enter:150,exit:150},Rt=function(e){return e(kt(),150,zt,150,zt)},Mt={name:"kul0w8",styles:"transition:opacity 100ms ease-in-out;position:relative"},Pt=Object(o.c)((function(e,t){var n=t.chatId;return function(e){var t,r=Object(l.mb)(e),i=Object(l.pb)(e),o=Object(l.qb)(e),a=Object(l.h)("logo",e),c=a.enabled;return{agent:Object(l.d)(n,e),chatActive:e.getChat(n).active,showAvatar:Object(l.h)("agentAvatar",e).enabled,isRatingEnabled:Object(l.h)("rating",e).enabled,logoPath:c?(t=a.path,"https://"+Object(U.m)(t)):null,showAgentBar:r,showOfflineInformation:i,showQueueInformation:o,offlineInformation:Object(l.q)(e),queueText:Object(l.t)(e),showTopBar:Object(l.fb)(e),hasNoVisibleUserEvents:Object(l.H)(e),isDropAreaVisible:e.getApplicationState("dropAreaVisible"),isUploadingFiles:!!Object(l.r)(e).length}}}))((function(e){var t=e.agent,n=e.chatId,o=e.showAvatar,c=e.isRatingEnabled,l=e.chatActive,s=e.logoPath,u=e.showAgentBar,d=e.isAgentBarExpandedSource,m=e.showOfflineInformation,p=e.offlineInformation,g=e.showQueueInformation,h=e.queueText,v=e.isLoadingHistory,j=e.children,x=e.hasNoVisibleUserEvents,y=e.isDropAreaVisible,w=e.isUploadingFiles,k=e.wrapperRef,E=i.useRef(),A=i.useRef(),C=Object(a.v)(d);return Object(r.d)("div",{ref:k},Object(r.d)(wt,{topBarHeight:k.current?k.current.clientHeight:0}),Object(r.d)(At,{id:lt,ref:E,elevate:y},Object(r.d)(r.a,null,(function(e){var i=e.css;return Object(r.d)(b.a,{appear:!0,component:null,exit:C},u&&C&&Object(r.d)(O.a,{timeout:It,classNames:Rt(i)},Object(r.d)("div",null,Object(r.d)(Et,{noShrink:!0},Object(r.d)(f.q,{flexFill:!0,ref:A,css:Mt},Object(r.d)(nt,{agent:t,chatId:n,showAvatar:o,logoPath:s,isRatingEnabled:c&&l}))))))}))),Object(r.d)(_t,{collapsed:!(g||m),elevate:y},(g||m)&&Object(r.d)(i.Fragment,null,Object(r.d)(Ct,null)),Object(r.d)(r.a,null,(function(e){var t=e.css;return Object(r.d)(b.a,{appear:g||m,component:null},Object(r.d)(O.a,{timeout:It,classNames:Rt(t)},Object(r.d)(Tt,{collapsed:!(g||m)},g&&Object(r.d)(gt,{logoPath:s,text:h,icon:Object(r.d)(B.r,{size:24}),isLoadingHistory:v,forceExpanded:x,forceCollapsed:y,isUploadDrawerVisible:w}),m&&Object(r.d)(gt,{logoPath:s,text:p,icon:Object(r.d)(B.g,{size:"16"}),isLoadingHistory:v,forceExpanded:x,forceCollapsed:y,isUploadDrawerVisible:w}),j)))}))))})),Ft=n(669),Dt=(n(262),n(106)),Bt=n(191),qt=Object(f.A)("label",{target:"e1e9gyrb2"})("color:",(function(e){return e.theme.colors.textPrimaryColor}),";cursor:",(function(e){return e.disabled?"not-allowed":"pointer"}),";display:flex;align-items:center;"),Ht=Object(f.A)("span",{target:"e1e9gyrb1"})("display:flex;align-items:center;justify-content:center;&:focus{outline-style:",(function(e){return e.focusVisible?"auto":"none"}),";}"),Lt=Object(f.A)("span",{target:"e1e9gyrb0"})("display:inline-block;",(function(e){var t=e.theme;return Object(r.c)("margin-",t.isRtl?"right":"left",":5px;")}),";"),Ut=function(e){var t=e.disabled,n=e.icon,r=e.label,o=e.fileInputRef,c=Object(u.g)(),l=Object(a.k)((function(){return o.current.click()})),d=Object(G.f)(),f=function(e){return e||B.b}(n);return i.createElement(qt,{flexFit:!0,htmlFor:"fileupload",disabled:t},i.createElement(Ht,Object(s.a)({role:"button","aria-label":"Send a file",tabIndex:"0"},l,d),i.createElement(f,{color:t?c.colors.tertiaryTextColor:"currentColor","aria-hidden":!0}),r?i.createElement(Lt,null,r):null))},Nt=n(671),Vt=n(682),Wt=n(20),Gt=n(35),Yt=function(e){var t=e.theme,n=e.disabled,i=e.active;return Object(r.c)("&:hover{background-color:",i?t.colors.pressedElement:t.colors.surfaceVariantHover,";",n&&"background-color: transparent",";}")};var Jt=Object(d.d)(["\ud83d\ude42","\ud83d\ude01","\ud83d\ude02","\ud83d\ude0a","\ud83d\ude0d","\ud83d\ude10","\ud83d\ude15","\ud83d\ude12","\ud83d\ude22","\ud83d\ude2d","\ud83c\udf89","\u2764\ufe0f","\ud83d\udc4c","\ud83d\udc4d","\ud83d\ude4f"],5),Kt=Object(f.A)("div",{target:"e1pkkif43"})({name:"14y8lnv",styles:"margin:0;padding:0;outline:none"}),Qt=Object(f.A)(B.s,{target:"e1pkkif42"})("display:flex;justify-content:center;align-items:center;color:",(function(e){var t=e.theme;return e.disabled?t.colors.tertiaryTextColor:t.colors.primaryTextColor}),";will-change:background-color;background-color:",(function(e){var t=e.theme;return e.active?t.colors.pressedElement:"transparent"}),";transition:background-color 150ms ease-in-out;opacity:1;",Yt,";"),Xt=Object(f.A)("div",{target:"e1pkkif41"})({name:"frpnj0",styles:"display:flex;flex-direction:row;align-items:center;justify-content:flex-start"}),Zt=Object(f.A)("div",{target:"e1pkkif40"})({name:"1uuyw89",styles:"display:flex;align-items:center;justify-content:center;flex-shrink:0;flex-grow:0"}),$t=function(e){var t=e.onEmojiPicked,n=e.disabled,r=i.useRef(null),o=i.useRef(null),a=i.useRef({open:d.W,close:d.W}),c=i.useState(!1),l=c[0],s=c[1],u=function(e){t(e),a.current.close(),Math.random()<.1&&Object(Gt.d)("Emoji_inserted_from_picker",{emoji:e})},f=Object(Nt.a)({onSelect:u}),b=f.useHighlightedItemId();i.useEffect((function(){n&&l&&a.current.close()}),[n,l]);return 0===Jt.length||Object(Wt.g)()?null:i.createElement(ce,{animated:!0,placement:"top",trigger:"press",kind:"float",controlsRef:a,onOpenChange:function(e,t){var n;if(Object(G.c)()?f.setHighlightedItem(0):f.clearHighlightedItem(),e)null==(n=o.current)||n.focus(),Math.random()<.01&&Object(Gt.d)("emoji_picker_opened",{});else if(!t){var i;null==(i=r.current)||i.focus()}s(e)},description:i.createElement(Kt,{tabIndex:0,role:"grid","aria-label":"emoji picker",ref:o,"aria-activedescendant":b,onKeyDown:function(e){switch(e.key){case"ArrowUp":f.highlightedIndex.current-5>=0&&f.moveHighlightedItem(-5);break;case"ArrowDown":f.highlightedIndex.current+5<f.items.current.length&&f.moveHighlightedItem(5);break;case"ArrowLeft":f.highlightedIndex.current-1>=0&&f.moveHighlightedItem(-1);break;case"ArrowRight":f.highlightedIndex.current+1<f.items.current.length&&f.moveHighlightedItem(1);break;case"Home":f.setHighlightedItem(0);break;case"End":f.setHighlightedItem(f.items.current.length-1);break;case" ":case"Enter":e.preventDefault(),f.selectHighlightedItem();break;case"Tab":return void e.preventDefault();default:return void f.highlightItemByString(e)}e.preventDefault()}},Jt.map((function(e,t){return i.createElement(Xt,{key:t,role:"row"},e.map((function(e,t){return i.createElement(Zt,{key:t,role:"gridcell"},i.createElement(Vt.a,{emoji:e,itemList:f,onPress:function(){return u(e)}}))})))})))},i.createElement(Qt,{"aria-label":"open emoji picker",ref:r,active:l,onPress:function(){l&&a.current.close()},disabled:n},i.createElement(B.n,null)))},en=n(15),tn=i.createContext({}),nn=Object(f.A)("ul",{target:"e1ixnb8m0"})("list-style-type:none;position:absolute;z-index:100;background:",(function(e){return e.theme.colors.floatSurface}),";box-shadow:",(function(e){return e.theme.boxShadow.md}),";border-radius:",(function(e){return e.theme.borderRadius.lg}),";margin:0;margin-top:3.2em;margin-left:0.8em;padding:0;min-width:180px;overflow:hidden;&:focus{outline:none;}&>:last-child{border-bottom:0;}"),rn=function(e){var t=function(e){var t=e.highlightedIndex,n=e.items,r=t.current;return null===r||r<0||0===n.current.length?null:n.current[r].ref}(e);return null!==t&&"true"!==t.current.getAttribute("aria-disabled")};var on=function(e){var t=e.children,n=e.onClose,r=e.menuButtonRef,o=e.onSelect,c=Object(v.a)(e,["children","onClose","menuButtonRef","onSelect"]),l=Object(V.useFrame)(),u=i.useRef(null),d=i.useRef(!1),f=Object(Nt.a)({onSelect:o}),b=f.useHighlightedItemId();return Object(a.m)(u,(function(e){r.current.contains(e.target)||n()}),l),Object(a.n)((function(){u.current&&u.current.focus()})),i.createElement(ee,null,i.createElement(tn.Provider,{value:f},i.createElement(nn,Object(s.a)({onMouseOut:f.clearHighlightedItem,tabIndex:-1,role:"menu",ref:u,"aria-activedescendant":b,onMouseDown:function(){return d.current=!1},onKeyDown:function(e){switch(d.current=!0,e.preventDefault(),e.key){case"ArrowUp":return void f.moveHighlightedItem(-1);case"ArrowDown":return void f.moveHighlightedItem(1);case"Home":return void f.setHighlightedItem(0);case"End":return void f.setHighlightedItem(f.items.current.length-1);case" ":if(!rn(f))return;return void f.selectHighlightedItem();case"Enter":if(!rn(f))return;return f.selectHighlightedItem(),n(),void r.current.focus();case"Tab":return n(),e.shiftKey?void r.current.focus():void Object(en.e)(r.current).focus();case"Escape":return n(),void r.current.focus();default:return void f.highlightItemByString(e)}}},c),t)))},an=Object(f.A)("li",{target:"ezmrzej0"})("background:transparent;font-family:inherit;font-size:14px;border:0;display:flex;align-items:center;padding:18px 25px;width:100%;cursor:pointer;border-bottom:",(function(e){return"1px solid "+e.theme.colors.divider}),";color:",(function(e){var t=e.highlighted,n=e.theme;return t?n.colors.ctaText:n.colors.primaryTextColor}),";background-color:",(function(e){var t=e.highlighted,n=e.theme;return t&&n.colors.cta}),";&[aria-disabled='true']{pointer-events:none;color:",(function(e){return e.theme.colors.disabledContrast}),";background-color:",(function(e){return e.theme.colors.disabled}),";}"),cn=function(e){var t=e.disabled,n=e.text,r=e.value,o=Object(v.a)(e,["disabled","text","value"]),a=i.useRef(null),c=i.useContext(tn),l=c.clearHighlightedItem,u=(0,c.useItem)({ref:a,text:n,value:r}),d=u.id,f=u.highlight,b=u.select,m=(0,u.useHighlighted)();return i.createElement(an,Object(s.a)({role:"menuitem",id:d,ref:a,highlighted:m,onMouseOver:f,onMouseOut:l,onClick:function(e){1!==e.nativeEvent.which||t||b()}},t&&{"aria-disabled":!0},o))},ln=n(25);var sn=function(e){return Object(r.c)("padding:0;color:",e.colors.tertiaryTextColor,";border-radius:",e.borderRadius.md,";transition:background-color 100ms ease-in-out;margin-left:",e.spaces.space1,";opacity:1;&:disabled{svg *{fill:",e.colors.tertiaryTextColor,";}}svg *{transition:fill 100ms ease-in-out;will-change:fill;}")},un=Object(f.A)("div",{target:"ex4ls1q3"})("position:absolute;top:0;height:100%;display:flex;align-items:center;",(function(e){return e.position+": "+(e.dense?"0.75em":"20px")}),";color:",(function(e){return e.theme.colors.primaryTextColor}),";"),dn=Object(f.A)(f.q,{target:"ex4ls1q2"})({name:"bjn8wh",styles:"position:relative"}),fn={name:"1oaeivz",styles:"margin-right:8px"},bn={name:"1qkltea",styles:"margin-left:5px"},mn=Object(f.A)(B.s,{target:"ex4ls1q1"})("display:flex;color:",(function(e){var t=e.theme;return e.disabled?t.colors.tertiaryTextColor:t.colors.primaryTextColor}),";will-change:background-color;background-color:",(function(e){var t=e.theme;return e.active?t.colors.pressedElement:"transparent"}),";transition:background-color 150ms ease-in-out;opacity:1;svg{display:block;}",Yt,";"),pn=Object(f.A)("input",{target:"ex4ls1q0"})({name:"eivff4",styles:"display:none"}),gn={name:"zefn70",styles:"bottom:4.8em;right:2em"};var hn=Object(o.c)((function(e,t){var n=t.chatId,r=function(t,n){g.e(e,t,n)},i=function(t){g.E(e,n,t)},o=function(t){g.H(e,n,t)},a=function(){g.J(e,Object(s.a)({source:"message_box"},l.z(e)))};return function(t){return{sendFile:r,sendMessage:i,setMessageDraft:o,openVideoCallMoment:a,messageDraft:t.getApplicationState("messageDraft"),reconnecting:l.sb(t),allowInput:l.jb(t),allowFileUpload:l.ib(t),isFileUploadPossible:l.P(t),mobile:t.getApplicationState("mobile"),applicationFocused:t.getApplicationState("applicationFocused"),videoCallButtonState:l.y(t),rtl:t.getApplicationState("rtl"),showAlternativeUploadOption:!t.getApplicationState("mobile")&&"code"===l.a(t)&&l.ib(t),showPermissionDeniedMessage:function(){return r=t.localize("screenshot_permission_error"),void g.b(e,n,{text:r});var r}}}}))((function(e){var t=e.allowFileUpload,n=e.isFileUploadPossible,c=e.mobile,l=e.onHeightChange,u=e.onSendMessage,b=e.allowInput,m=e.reconnecting,p=e.sendFile,g=e.sendMessage,h=e.setMessageDraft,j=(e.applicationFocused,e.onFocusChange),O=e.openVideoCallMoment,x=e.videoCallButtonState,y=e.rtl,w=e.showAlternativeUploadOption,k=e.messageDraft,E=e.showPermissionDeniedMessage,A=Object(v.a)(e,["allowFileUpload","isFileUploadPossible","mobile","onHeightChange","onSendMessage","allowInput","reconnecting","sendFile","sendMessage","setMessageDraft","applicationFocused","onFocusChange","openVideoCallMoment","videoCallButtonState","rtl","showAlternativeUploadOption","messageDraft","showPermissionDeniedMessage"]),C=i.useRef(null),S=i.useRef(null),T=i.useRef([0,0]),_=i.useRef(null),z=Object(a.h)("text-composer"),I=z.get(),R=i.useState(I||k||""),M=R[0],P=R[1],F=i.useState(!1),D=F[0],q=F[1],H=i.useState(!1),L=H[0],U=H[1],N=i.useMemo((function(){return h}),[h]),W=Object(a.d)(m),G=Object(je.b)(),Y=y?"rtl":"ltr",J=Object(V.useFrame)().document,K=i.useCallback((function(e,t){return e.forEach((function(e){return p(e,t)}))}),[p]),Q=i.useCallback((function(e){switch(q(!1),e){case"screenshot":ne(),Object(Gt.d)("snapshot_selected",{});break;case"file":_.current.click()}}),[q,ne]),X=i.useCallback((function(){U(!0),j&&j(!0)}),[j]),$=i.useCallback((function(){U(!1),j&&j(!1)}),[j]),ee=i.useCallback((function(e){P(""),g(e),h(null),z.clear(),u&&u()}),[g,u,h,z]),te=i.useCallback((function(e){K(Object(d.wb)(e.target.files))}),[K]),ne=i.useCallback((function(){Object(ln.a)().then((function(e){K([e],"screenshot")})).catch((function(e){"NotAllowedError"===e.name&&E(),Object(Gt.d)("snapshot_cancel",{reason:e.message})}))}),[K,E]);i.useEffect((function(){var e=C.current,t=function(){T.current=[e.selectionStart,e.selectionEnd]};return e.addEventListener("blur",t),function(){return e.removeEventListener("blur",t)}}),[]),i.useEffect((function(){var e=function(e){var t=Array.from(e.clipboardData.items);if(!t.some((function(e){return"text/plain"===e.type}))){var n=t.reduce((function(e,t){var n=t.getAsFile();return n&&e.push(n),e}),[]);n.length&&(e.preventDefault(),K(n,"clipboard"))}};return t&&L&&n&&J.addEventListener("paste",e),function(){return J.removeEventListener("paste",e)}}),[t,L,n,J,p,K]);var re=function(e){var t=T.current,n=t[0],r=t[1];Z.a.flushSync((function(){P((function(t){var i=t.slice(0,n)+e+t.slice(r,t.length);return z.set(i),i}))})),Z.a.flushSync((function(){C.current.focus();var t=n+e.length;C.current.setSelectionRange(t,t)}))},ie=G?{id:"chat-widget-text-input"}:{};return Object(r.d)(o.a,null,(function(e){return Object(r.d)(f.t,Object(s.a)({},A,{value:M,active:b,disabled:m&&!W,mobile:c,defaultValue:I,onSend:ee,onValueChange:function(e){P(e),z.set(e),N(e)}}),Object(r.d)(dn,{verticalAlign:"center"},x.visible&&Object(r.d)(un,{position:"left",dense:x.visible},Object(r.d)(ce,{placement:"top",description:"Start a video call"},Object(r.d)(B.s,{onPress:O,disabled:x.disabled,css:function(e){return{opacity:1,color:x.disabled?e.colors.tertiaryTextColor:e.colors.primaryTextColor}},"aria-label":"Start a video call"},Object(r.d)(B.X,null)))),Object(r.d)(f.u,Object(s.a)({ref:C,autoFocus:Object(Bt.c)(),css:function(e){return function(e){var t=e.disabled,n=e.leftIcons,i=e.mobile,o=e.theme;return Object(r.c)("font-family:inherit;padding:1.25em ",o.isRtl&&!i&&"modern"!==o.name?"135px":"125px"," 1.25em ",n?"3.75em":"20px",";overflow-y:auto;margin-top:0;transition:box-shadow 0.1s ease-in-out;color:",t?o.colors.tertiaryTextColor:o.colors.primaryTextColor,";background-color:",t?o.colors.disabled:Object(ht.h)(.012,o.colors.surface),";&:focus{background-color:",o.colors.surface,";}&:disabled{cursor:not-allowed;}")}({theme:e,mobile:c,disabled:m&&!W,leftIcons:x.visible})},disabled:m&&!W,flexFill:!0,minRows:1,onClick:function(){L||C.current.focus()},onBlur:$,onFocus:X,onHeightChange:l,placeholder:e("embedded_textarea_placeholder"),"aria-label":e("embedded_textarea_placeholder"),enterKeyHint:"send",dir:M?"auto":Y},ie)),Object(r.d)(un,{position:"right",dense:x.visible},Object(r.d)($t,{onEmojiPicked:re,disabled:m&&!W}),t&&!w&&Object(r.d)(Ut,{disabled:!n,handleFileChange:te,fileInputRef:_}),w&&Object(r.d)(mn,{"aria-label":"Add an attachment",ref:S,onPress:function(){return q(!D)},disabled:!n,active:D},Object(r.d)(B.b,{"aria-hidden":"true"})),D&&Object(r.d)(on,{"aria-label":"File upload menu",menuButtonRef:S,onClose:function(){return q(!1)},css:gn,onSelect:Q},Object(r.d)(cn,{value:"file",disabled:G},Object(r.d)(Ut,{disabled:!n,handleFileChange:te,label:e("send_file"),icon:B.p})),Object(r.d)(cn,{value:"screenshot",disabled:G},Object(r.d)(B.J,{css:function(e){return function(e){return e.isRtl?bn:fn}(e)},"aria-hidden":!0}),e("attach_screenshot"))),Object(r.d)(f.r,{flexFit:!0,icon:Object(r.d)(B.L,null),css:sn,"aria-label":"Send a message"}),!G&&Object(r.d)(pn,{multiple:!0,onChange:te,type:"file",value:"",id:"fileupload",ref:_,disabled:!n}))))}))})),vn="Toggle modal",jn="set_can_be_shown",On="expand",xn="collapse",yn="toggle_collapsed",wn="main_transition_start",kn="main_transition_end",En="drawer_transition_end",An="reset_collapsed",Cn="show_conifrmation_modal",Sn="hide_conifrmation_modal",Tn=function(){return{type:jn}},_n=function(){return{type:On}},zn=function(){return{type:xn}},In=function(){return{type:yn}},Rn=function(){return{type:wn}},Mn=function(){return{type:kn}},Pn=function(){return{type:En}},Fn=function(){return{type:An}},Dn=function(e){return{type:Cn,payload:e}},Bn=function(){return{type:Sn}},qn=function(e,t){switch(t.type){case jn:return Object(s.a)({},e,{canBeShown:!0});case On:return Object(s.a)({},e,{collapsed:!1});case xn:return Object(s.a)({},e,{collapsed:!0});case yn:return Object(s.a)({},e,{collapsed:!e.collapsed});case An:return Object(s.a)({},e,{animationEnded:!1,collapsed:!1});case wn:return Object(s.a)({},e,{isAnimating:!0});case kn:return Object(s.a)({},e,{isAnimating:!1,animationEnded:!0});case En:return Object(s.a)({},e,{isExpanding:!1});case Cn:return Object(s.a)({},e,{isConfirmationModalShown:!0,confirmationModalMode:t.payload},e.collapsed&&{isExpanding:!0,collapsed:!1});case Sn:return Object(s.a)({},e,{isConfirmationModalShown:!1});default:return e}};function Hn(){var e=Object(j.a)(["\n\t&-enter,\n\t&-appear {\n\t\ttransform: translateY(100%);\n\t}\n\t&-enter-active,\n\t&-appear-active,\n\t&-enter-done,\n\t&-appear-done {\n\t\ttransform: translateY(0);\n\t\ttransition: transform ","ms ",";\n\t}\n\n\t&-exit {\n\t\ttransform: translateY(0);\n\t}\n\n\t&-exit-active {\n\t\ttransform: translateY(100%);\n\t\ttransition: transform ","ms\n\t\t\t",";\n\t}\n"]);return Hn=function(){return e},e}var Ln=function(e){return{enter:600,exit:e?200:400}},Un=function(e,t,n,r){return e(Hn(),(n?0:600)*t,r.transitions.easings.swift,(n?200:400)*t,r.transitions.easings.swift)},Nn=function(e){var t=e.show,n=e.collapsed,o=e.durationFactor,a=e.onTransitionStart,c=e.onTransitionEnd,l=e.children,s=e.nodeRef;return i.createElement(r.a,null,(function(e){var r=e.css,u=e.theme;return i.createElement(b.a,{appear:!0,component:null},t&&i.createElement(O.a,{timeout:Ln(n),onExited:c,onEntered:c,onExiting:a,onEntering:a,classNames:Un(r,o,n,u),nodeRef:s},l))}))},Vn=n(690),Wn="transform, height, bottom, min-height, max-height, box-shadow, z-index, border-radius",Gn=i.forwardRef((function(e,t){var n=e.heightPercentage,o=e.collapsed,c=e.children,l=e.animationEnded,u=e.onTransitionEnd,d=e.isFooterHidden,f=Object(v.a)(e,["heightPercentage","collapsed","children","animationEnded","onTransitionEnd","isFooterHidden"]),b=i.useRef(null),m=Object(a.b)(b,t),p=Object(je.b)();return Object(a.f)("touchmove",b),Object(a.a)(p?null:b),Object(r.d)(Vn.a,{autoFocus:!1,disabled:o,returnFocus:!0,crossFrame:!1,css:function(e){return function(e){var t=e.heightPercentage,n=e.collapsed,i=e.animationEnded,o=e.isFooterHidden,a=e.theme;return Object(r.c)("position:absolute;z-index:",n?100:1500,";display:flex;flex-direction:column;height:",n?"48px":100*t+"%",";min-height:",n?"48px":"270px",";max-height:",n?"48px":"100%",";width:100%;bottom:",function(e,t,n){return!t||e?0:"modern"===n.name?32:24}(o,n,a),"px;border-radius:",n?0:"inherit",";color:",a.colors.primaryTextColor,";background-color:",a.colors.floatSurface,";box-shadow:",n?a.boxShadow.floating:"none",";",i&&{transitionProperty:Wn,transitionDuration:600*t+"ms",transitionTimingFunction:""+a.transitions.easings.swift,willChange:Wn},";")}({heightPercentage:n,collapsed:o,animationEnded:l,isFooterHidden:d,theme:e})},ref:m,lockProps:Object(s.a)({role:"dialog","aria-modal":!0,onTransitionEnd:u},f)},c)})),Yn=n(266),Jn=n(75),Kn=n(666),Qn={allowtransparency:"true",scrolling:"yes",style:{position:"absolute",minWidth:"100%",minHeight:"100%",height:"1px",width:"1px",margin:"0",padding:"0",background:"none",border:"0"}},Xn=function(e,t){return Object(s.a)({moment_url:Object(U.f)(e)+Object(U.g)(e),moment_origin:Object(U.f)(e)||""},t&&{ui_source:t})},Zn=function(e){return Object(r.c)("flex-grow:1;position:relative;overflow:auto;-webkit-overflow-scrolling:touch;display:",e?"none":"block",";background-color:#ffffff;")},$n=function(e,t,n){var r=document.createElement("iframe");return r.allow=n,r.src=t,e.appendChild(r),r},er=function(e){var t=e.id,n=e.url,o=e.close,a=e.hidden,c=e.sendMessage,l=e.sendSystemMessage,s=e.setAttributes,u=e.onLoadingChanged,f=e.onMomentDataChanged,b=e.iframeAllowedProperties,m=e.getCustomerToken,p=e.updateCustomerData,g=e.licenseId,h=e.chatId,v=e.groupId,j=e.source,O=i.useRef(void 0),x=i.useRef(d.W),y=i.useRef(d.W),w=i.createRef();return x.current=function(){if(n&&w.current){var e={close:o,sendMessage:c,setAttributes:s,updateCustomerData:p,licenseId:g,chatId:h,groupId:v,setExternalLink:function(e){f({externalLink:e})},setIsFragile:function(e){f({isFragile:e})},getIdentityTransferToken:function(){if(Object(Kn.b)(n))return m().then((function(e){return function(e){var t=e.accessToken;return Object(Jn.a)(Object(ln.b)("accounts")+"/customer/identity_transfer",{method:"POST",headers:{Authorization:"Bearer "+t},body:JSON.stringify({bearer_type:"customer",client_id:"c5e4f61e1a6c3b1521b541bc5c5a2ac5"})}).then((function(e){return e.json()})).then((function(e){return Object(d.P)(d.b,e)}))}(e)})).catch((function(e){return e}));throw new Error("Moment App not authorized")}};l&&(e.sendSystemMessage=l),O.current=Object(Yn.b)({frame:$n(w.current,n,b),url:n,onConnected:function(e){var t=e.data;u(!1),f(t)}},e),Object(en.a)(Qn,O.current.frame),u(!0),O.current.frame.addEventListener("load",(function e(){O.current&&(u(!1),O.current.frame.removeEventListener("load",e))})),f({title:O.current.title}),Object(Gt.d)("moment_opened",Xn(Object(Yn.a)(n),j))}},y.current=function(){O.current&&(O.current.destroy(),w.current&&(w.current.innerHTML=""),f(null),u(!1),O.current=void 0),n&&Object(Gt.d)("moment_closed",Xn(Object(Yn.a)(n)))},i.useEffect((function(){return x.current(),function(){return y.current()}}),[n]),Object(r.d)("div",{id:t,ref:w,css:Zn(a),onScroll:function(e){!function(e){if(e){var t=e.scrollTop,n=e.scrollHeight-e.offsetHeight;0===t?e.scrollTop=1:t===n&&(e.scrollTop=n-1)}}(e.currentTarget)}})},tr=n(229),nr="confirmation-modal-label-id",rr={fragile:function(){return"Any data or connection will be lost after you close this window"},change:function(e){return'If you open another app, "'+e+'" will be closed.'},"fragile-change":function(e){return'If you open another app, "'+e+"\" will be closed. You'll lose data and connection."}},ir=Object(f.A)("div",{target:"ej1cp8k3"})("z-index:1500;position:absolute;top:42px;left:50%;min-width:75%;max-width:285px;display:flex;flex-direction:column;background:",(function(e){return e.theme.colors.surface}),";box-shadow:",(function(e){return e.theme.boxShadow.lg}),";padding:",(function(e){return e.theme.spaces.space6}),";border-radius:",(function(e){return e.theme.borderRadius.md}),";"),or=Object(f.A)(tr.a,{target:"ej1cp8k2"})("display:flex;width:auto;flex-grow:",(function(e){return e.secondary?1:1.5}),";padding:8px 12px;",(function(e){var t=e.secondary,n=e.theme;return t&&{backgroundColor:n.colors.surfaceDecorative,color:n.colors.primaryTextColor}})," &:first-child{margin-right:",(function(e){return e.theme.spaces.space4}),";}"),ar=Object(f.A)("p",{target:"ej1cp8k1"})("margin:0;overflow-wrap:break-word;",(function(e){return e.theme.typography.basic}),";"),cr=Object(f.A)("div",{target:"ej1cp8k0"})("width:100%;display:flex;align-self:center;margin-top:",(function(e){return e.theme.spaces.space4}),";"),lr=function(e){var t=e.shown,n=e.onResponse,r=e.mode,o=e.currentAppName,a=i.useRef(null),c=Object(se.c)({isOpen:!0,isDismissable:!0,onClose:function(){return n("canceled")}},a).overlayProps,l=Object(se.b)().modalProps,u=Object(le.a)({"aria-labelledby":nr},a).dialogProps,f=Object(je.b)(),m="fragile"!==r,p=Object(d.E)("fragile",r);return Object(se.d)({isDisabled:f}),i.createElement(i.Fragment,null,i.createElement(ve,{shown:t}),i.createElement(b.a,{component:null},t&&i.createElement(h.b,{nodeRef:a},i.createElement(Y.a,{contain:!0,restoreFocus:!0,autoFocus:!0},i.createElement(ir,Object(s.a)({},Object(K.h)(c,u,l),{ref:a}),i.createElement(ar,{id:nr},rr[r](o)),i.createElement(cr,null,i.createElement(or,{secondary:!0,onClick:function(){return n("canceled")}},m?"Do nothing":"Cancel"),i.createElement(or,{destructive:p,onClick:function(){return n("confirmed")}},m?"Open another app":"Close anyway")))))))},sr=n(166),ur=n(670),dr=n(267);var fr=Object(f.A)(B.f,{target:"e1crrbvm3"})((function(e){return"up"===e.direction&&{transform:"scaleY(-1)"}}),";"),br=Object(f.A)("div",{target:"e1crrbvm2"})("min-height:",(function(e){return e.visible?48:0}),"px;transition:min-height 300ms ",(function(e){return e.theme.transitions.easings.swift}),";"),mr=Object(f.A)(B.s,{target:"e1crrbvm1"})({name:"nekhfk",styles:"display:flex;align-items:center;width:100%;background-color:transparent;border:none;cursor:pointer"}),pr=Object(f.A)(ur.b,{target:"e1crrbvm0"})({name:"1flj9lk",styles:"text-align:left"}),gr={full:.8,tall:.5,compact:.3},hr={name:"zjik7",styles:"display:flex"},vr=Object(o.c)((function(e,t){var n=t.chatId,r=function(t){return void 0===t&&(t=!1),g.i(e,t)},i=function(t){return g.T(e,{properties:t})},o=function(t){["email","name"].forEach((function(e){(t[e]&&"string"!==typeof t[e]||""===t[e])&&delete t[e]})),(t.email||t.name)&&g.T(e,t)},a=function(t){return g.E(e,n,t)},c=Object(dr.a)({allowVideoConferencing:Object(l.F)(e,"microphone"),allowClipboardWrite:Object(l.F)(e,"clipboard_write")}),s=function(t){return g.D(e,n,t)};return function(e){var t=e.getView("Moment"),n=t.show,u=t.data,d=u.url,f=Object(v.a)(u,["url"]),b=e.getApplicationState("license");return{show:n,closeMoment:r,sendMessage:a,sendSystemMessage:s,updateSessionUser:i,onUpdateCustomerData:o,momentData:f,url:d,iframeAllowedProperties:c,getCustomerToken:function(){return new Promise((function(t,n){e.once("customer_token_response",t),e.once("customer_token_error",n),e.emit("request_customer_token")}))},licenseId:b,isFooterHidden:Object(l.bb)(e),registerRequestCloseMomentListener:function(t){return e.on("request_close_moment",t),function(){return e.off("request_close_moment",t)}},registerRequestExpandMomentListener:function(t){return e.on("request_expand_moment",t),function(){return e.off("request_expand_moment",t)}},minimizeWidget:function(t){return void 0===t&&(t=!1),g.y(e,!1,t)},setNextMomentData:function(t){return e.updateView("Moment",{show:!0,data:t})},chatId:Object(l.c)(e)||void 0,groupId:e.getApplicationState("group")}}}))((function(e){var t=e.iframeAllowedProperties,n=e.show,o=e.url,c=e.updateSessionUser,l=e.sendMessage,u=e.sendSystemMessage,f=e.onSendMessage,b=e.getCustomerToken,m=e.licenseId,p=e.onUpdateCustomerData,g=e.isFooterHidden,h=e.registerRequestCloseMomentListener,v=e.registerRequestExpandMomentListener,j=e.minimizeWidget,O=e.setNextMomentData,x=e.chatId,y=e.groupId,w=Object(a.h)("moment-collapsed"),k={canBeShown:!1,collapsed:!1,isExpanding:!0,isAnimating:!1,animationEnded:!1,isConfirmationModalShown:!1,confirmationModalMode:"change"},E=i.useReducer(qn,k,(function(){var t;return Object(s.a)({},k,{collapsed:!!(null==(t=w.get())?void 0:t.collapsed)&&!e.momentData.wasTriggeredByGreeting})})),A=E[0],C=A.canBeShown,S=A.collapsed,T=A.isExpanding,_=A.isAnimating,z=A.animationEnded,I=A.isConfirmationModalShown,R=A.confirmationModalMode,M=E[1],P=i.useRef(null),F=i.useRef(null),D=i.useState(!1),q=D[0],H=D[1],L=i.useState({}),U=L[0],N=L[1],V=i.useState(!1),W=V[0],Y=V[1],J=i.useRef(!1),Q=i.useRef(null),X=Object(G.f)(),Z=Object(a.e)(C&&n,(function(){return e.closeMoment(W)})),$=Z[0],ee=Z[1],te=_||q,ne=function(e){var t=e.height;return t&&t in gr?gr[t]:gr.full}(e.momentData),re=ne/.8,ie=Object(K.l)(),oe=Object(Oe.b)();Object(d.G)(U)&&!Object(d.G)(e.momentData)&&N(Object(s.a)({},U,e.momentData)),Object(a.x)(i.useCallback((function(){return M(Tn())}),[]),300),i.useEffect((function(){e.momentData.wasTriggeredByGreeting&&z&&O(Object(s.a)({},e.momentData,{url:o,wasTriggeredByGreeting:!1}))}),[z,o,e.momentData,O]),i.useEffect((function(){var e=h((function(){if(J.current)return Y(!0),void M(Dn("fragile"));j(!0)}));return function(){return e()}}),[J,j,h]),i.useEffect((function(){var e=v((function(e){M(_n()),(null==e?void 0:e.nextMoment)&&(Q.current=e.nextMoment,M(Dn(J.current?"fragile-change":"change")))}));return function(){return e()}}),[v]),i.useEffect((function(){w.set({collapsed:S})}),[w,S]),i.useEffect((function(){oe.setMomentExpand(n&&!S)}),[n,S,oe]),i.useEffect((function(){$&&Object(K.d)(F.current)}),[$]),i.useEffect((function(){!$&&z&&M(Fn())}),[$,z]);return Object(r.d)(i.Fragment,null,Object(r.d)(ve,{shown:n&&!S,onPress:function(){z&&M(zn())},zIndex:99}),Object(r.d)(br,{visible:n}),Object(r.d)(Nn,{show:$||n&&S,collapsed:S,nodeRef:P,onTransitionEnd:function(){M(Mn())},onTransitionStart:function(){M(Rn())},durationFactor:re},Object(r.d)(Gn,{ref:P,heightPercentage:ne,collapsed:S,animationEnded:z,isFooterHidden:g,onTransitionEnd:function(){return M(Pn())}},Object(r.d)(ur.c,{noShrink:!0},Object(r.d)(mr,{"aria-label":vn,"aria-expanded":!S,"aria-controls":ie,onPress:function(){return M(In())}},Object(r.d)(ur.a,{src:U.icon,"aria-hidden":!0}),Object(r.d)(pr,Object(s.a)({ellipsis:!0,flexFill:!0,tabIndex:-1,ref:F},X),U.title),(!U.externalLink||S)&&Object(r.d)(fr,{direction:S?"up":"down"})),U.externalLink&&!S&&Object(r.d)(i.Fragment,null,Object(r.d)(at.a,{href:U.externalLink,rel:"nofollow noopener noreferrer",css:hr,"aria-label":"Open in a new tab"},Object(r.d)(B.D,{"aria-hidden":!0})),Object(r.d)(B.s,{onPress:function(){return M(In())},css:hr,"aria-label":vn},Object(r.d)(fr,{direction:S?"up":"down"}))),Object(r.d)(B.s,{onPress:function(){J.current?M(Dn("fragile")):ee()},css:hr,"aria-label":"Close modal"},Object(r.d)(B.h,null))),Object(r.d)(lr,{shown:!S&&!T&&!!I,mode:R,currentAppName:U.title,onResponse:function(e){if(M(Bn()),"canceled"!==e||!Object(d.E)("change",R))return Q.current?("confirmed"===e&&(J.current=!1,O(Q.current)),void(Q.current=null)):void("confirmed"===e&&ee());M(zn())}}),Object(r.d)(er,{id:ie,hidden:S||te,close:ee,url:o,licenseId:m,chatId:x,groupId:y,source:U.source,sendMessage:function(e){var t=e.text;l(t),f&&f(t)},sendSystemMessage:u,setAttributes:c,updateCustomerData:p,onMomentDataChanged:function(e){e&&"isFragile"in e&&(J.current=!!e.isFragile),N((function(t){return e?Object(s.a)({},t,e):{}}))},onLoadingChanged:H,iframeAllowedProperties:t,getCustomerToken:b}),!S&&te&&Object(r.d)(sr.a,{size:"xlarge",style:{margin:"auto"}}))))})),jr=n(172),Or=n(110),xr=n(95),yr=n(42);var wr=Object(f.A)("span",{target:"e1oq7ugp9"})((function(e){var t=e.failed,n=e.theme;return{color:t?n.colors.error:n.colors.primaryTextColor}}),";"),kr=Object(f.A)("div",{target:"e1oq7ugp8"})("flex:1;display:flex;flex-direction:column;margin:2px;min-width:calc(50% - 4px);max-width:100%;height:",(function(e){var t=e.theme;return e.mobile||"modern"!==t.name?140:100}),"px;"),Er=Object(f.A)("div",{target:"e1oq7ugp7"})("border-radius:",(function(e){return e.theme.borderRadius.xl}),";flex:1;width:100%;height:100%;display:flex;overflow:hidden;position:relative;align-items:center;justify-content:center;"),Ar=Object(f.A)("div",{target:"e1oq7ugp6"})("color:",(function(e){return e.theme.colors.secondaryTextColor}),";background-color:",(function(e){return e.theme.colors.surfaceDecorative}),";width:100%;height:100%;display:flex;align-items:center;justify-content:center;"),Cr=Object(f.A)("img",{target:"e1oq7ugp5"})({name:"q4dzvk",styles:"width:100%;height:auto"}),Sr=Object(f.A)("div",{target:"e1oq7ugp4"})({name:"1uja423",styles:"position:absolute;top:6px;right:6px;z-index:1"}),Tr=Object(f.A)("div",{target:"e1oq7ugp3"})("height:24px;width:24px;display:flex;border-radius:50%;align-items:center;justify-content:center;",(function(e){var t=e.theme,n=e.success,r=e.error;return n?{backgroundColor:t.colors.success,color:t.colors.successContrast}:r?{backgroundColor:t.colors.error,color:t.colors.errorContrast}:void 0}),";"),_r=Object(f.A)("div",{target:"e1oq7ugp2"})("opacity:",(function(e){return e.visible?1:0}),";transition:opacity 100ms ",(function(e){return e.theme.transitions.easings.smooth}),";position:absolute;left:6px;right:6px;bottom:6px;display:flex;flex-direction:row-reverse;align-items:center;justify-content:space-between;z-index:1;",yr.w,"{width:20px;height:20px;}"),zr=Object(f.A)("div",{target:"e1oq7ugp1"})("border-radius:",(function(e){return e.theme.borderRadius.md}),";color:",(function(e){return e.theme.colors.grayscale[0]}),";padding:2px;display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:rgba(0, 0, 0, 0.6);"),Ir=Object(f.A)("span",{target:"e1oq7ugp0"})((function(e){return e.theme.typography.caption}),";color:",(function(e){return e.theme.colors.grayscale[0]}),";cursor:pointer;margin-right:4px;"),Rr={name:"e0dnmk",styles:"cursor:pointer"},Mr=function(e){var t=e.failReason,n=i.useRef(null),o=Object(Y.f)({},n).focusableProps;return Object(r.d)(Tr,Object(s.a)({"aria-label":t,error:!0},o,{ref:n,tabIndex:0}),Object(r.d)(yr.c,{css:Rr,size:24,"aria-hidden":!0}))},Pr={name:"1nq59d9",styles:"transition:opacity 100ms linear"},Fr=function(e){var t=e.name,n=e.failed,i=e.finished,a=e.url,c=e.fileType,l=e.mobile,s=e.alternativeText,u=e.onCancel,d=e.onAlternativeTextEdit,f=e.progress,b=void 0===f?0:f,m=e.failReason,p=void 0===m?"":m,g=e.insistHover,h=e.onHoverChange,v=Object(G.i)({onHoverChange:h}),j=v.hoverProps,O=v.isHovered,x=Object(G.f)().isFocusVisible;return Object(r.d)(o.a,null,(function(e){return Object(r.d)(kr,null,Object(r.d)(Er,j,Object(r.d)(Sr,null,i&&Object(r.d)(Tr,{success:!0},Object(r.d)(yr.bb,{size:24,"aria-hidden":!0})),n&&Object(r.d)(ce,{description:p,allowTouch:!0},Object(r.d)(Mr,{failReason:p})),!i&&!n&&Object(r.d)(sr.a,{size:"medium",progress:b,"aria-hidden":!0})),(u||d)&&Object(r.d)(_r,{visible:g||O||x||l},u&&Object(r.d)(zr,null,Object(r.d)(yr.w,{onPress:u,"aria-label":"remove the "+t+" file"},Object(r.d)(yr.Q,{size:20,"aria-hidden":!0}))),"image"===c&&d&&Object(r.d)(zr,null,Object(r.d)(yr.w,{onPress:d,"aria-label":"add alternative text to the "+t+" image"},Object(r.d)(yr.m,{size:20,"aria-hidden":!0})),Object(r.d)(Ir,{onClick:d},e("alt_text")))),"image"===c&&Object(r.d)(Cr,{src:a,alt:s||"",style:{opacity:i?1:.25},css:Pr}),"other"===c&&Object(r.d)(Ar,null,Object(r.d)(yr.r,{size:56}))),Object(r.d)(wr,{ellipsis:!0,failed:n,finished:i},t))}))},Dr=n(655);var Br=Object(f.A)("p",{target:"eprg9im5"})("margin-bottom:",(function(e){var t=e.theme,n=e.mobile;return"modern"!==t.name&&n?0:4}),"px;",(function(e){return e.theme.typography.caption})," ",Object(ct.a)(),";color:",(function(e){return e.theme.colors.primaryTextColor}),";margin:0;padding:0 12px;max-width:100%;max-height:50px;"),qr=Object(f.A)("div",{target:"eprg9im4"})((function(e){var t=e.theme;return!e.mobile&&"modern"===t.name&&"max-height: 230px; overflow-y: auto;"}),";"),Hr=Object(f.A)("div",{target:"eprg9im3"})("height:",(function(e){var t=e.theme;return e.mobile||"modern"!==t.name?145:140}),"px;overflow:hidden;display:flex;align-items:center;justify-content:center;width:100%;"),Lr=Object(f.A)("div",{target:"eprg9im2"})("padding:",(function(e){var t=e.theme;return t.spaces.space3+" "+t.spaces.space5}),";display:flex;flex-direction:row;justify-content:center;align-items:center;max-width:100%;"),Ur=Object(f.A)(Dr.a,{target:"eprg9im1"})("height:34px;",(function(e){var t=e.theme.isRtl?"left":"right";return Object(r.c)("border-",t,":none;border-top-",t,"-radius:0;border-bottom-",t,"-radius:0;")}),";"),Nr=Object(f.A)(B.s,{target:"eprg9im0"})("color:",(function(e){var t=e.theme;return e.highlighted?t.colors.ctaText:t.colors.disabledContrast}),";background-color:",(function(e){var t=e.theme;return e.highlighted?t.colors.cta:t.colors.disabled}),";height:34px;width:34px;justify-content:center;align-items:center;display:flex;padding:6px 8px;",(function(e){var t=e.theme,n=t.isRtl?"left":"right",i=t.isRtl?"right":"left";return Object(r.c)("border-top-",i,"-radius:0;border-bottom-",i,"-radius:0;border-top-",n,"-radius:6px;")})," transition:background 100ms linear;"),Vr={name:"q4dzvk",styles:"width:100%;height:auto"},Wr=function(e){var t=e.url,n=e.alternativeText,a=e.onAlternativeTextChanged,c=e.mobile,l=e.titleId,s=i.useState(n||""),u=s[0],d=s[1],f=Object(G.f)().isFocusVisible,b=Object(K.l)();return Object(r.d)(o.a,null,(function(e){return Object(r.d)(qr,{mobile:c},Object(r.d)(Hr,{mobile:c},Object(r.d)("img",{src:t,css:Vr,alt:n})),Object(r.d)(Lr,null,Object(r.d)(Ur,{autoFocus:!0,"aria-labelledby":l,"aria-describedby":b,maxLength:16384,value:u,placeholder:e("describe_image"),onChange:function(e){var t=e.target;return d(t.value)}}),Object(r.d)(Nr,{"aria-label":"save the image's alternative text",highlighted:u!==n||f,disabled:u===n,onPress:function(){a(u)}},Object(r.d)(B.a,{size:24}))),Object(r.d)(Br,{id:b,mobile:c},e("alternative_text_description")))}))},Gr=n(121);var Yr=Object(f.A)("h2",{target:"e1k6tlos7"})((function(e){var t=e.failed,n=e.theme;return t&&{color:n.typography.errorCaption.color}})," padding:0 6px;font-size:14px;font-weight:normal;align-self:center;margin:0;"),Jr=Object(f.A)("div",{target:"e1k6tlos6"})({name:"189qznn",styles:"display:flex;cursor:pointer"}),Kr=Object(f.A)("div",{target:"e1k6tlos5"})("transition:max-height ",(function(e){return e.longAnimation?600:400}),"ms ",(function(e){return e.theme.transitions.easings.swift}),";overflow:hidden;max-height:249px;"),Qr=Object(f.A)("div",{target:"e1k6tlos4"})("height:auto;",(function(e){return e.edit&&{margin:"0 -8px"}}),";"),Xr=Object(f.A)("div",{target:"e1k6tlos3"})("max-height:",(function(e){var t=e.theme;return e.mobile||"modern"!==t.name?200:125}),"px;overflow:auto;display:flex;flex-direction:row;flex-wrap:wrap;padding:4px 0;"),Zr=Object(f.A)("hr",{target:"e1k6tlos2"})("margin:",8,"px -",8,"px 0;border:0;border-bottom:1px solid rgba(0, 0, 0, 0.1);"),$r=Object(f.A)(yr.g,{target:"e1k6tlos1"})((function(e){return"up"===e.direction&&{transform:"scaleY(-1)"}}),";"),ei={name:"gc6sdx",styles:"padding-left:4px"},ti=Object(f.A)(B.B,{target:"e1k6tlos0"})("padding:",(function(e){var t=e.theme,n=e.isEdit,r=e.expanded;return!e.mobile&&"modern"===t.name&&n&&r?"8px 8px 0":"8px"}),";",(function(e){return e.theme.typography.basic}),";color:",(function(e){return e.theme.colors.primaryTextColor}),";overflow:hidden;"),ni={name:"x4j9dr",styles:"margin-top:6px;max-width:100%"},ri={name:"13fmgtn",styles:"transform:scaleX(-1)"},ii=Object(xr.createSelector)([d.D],(function(e){return e.map((function(e){return Object(s.a)({id:e.id},e.properties)}))})),oi=Object(o.c)((function(e,t){var n=t.chatId,r=function(t){e.emit("cancel_upload",{eventId:t})},i=function(t,r){e.updateEvent(n,t,{properties:{alternativeText:r}})},o=function(){e.emit("send_file_events")};return function(e){var t=e.getApplicationState(),n=t.isSendingFileEvents,a=t.mobile,c=t.config,s=t.license,u=t.group,d=t.requestedGroup,f=ii(Object(l.r)(e));return{mobile:a,persistKey:Object(Gr.a)({license:s,group:u,requestedGroup:d}),isSendingFileEvents:n,uploadEntries:f,cancelUpload:r,setAlternativeText:i,sendFiles:o,localize:e.localize,themeName:c.theme.name}}}))((function(e){var t=e.uploadEntries,n=e.uploadEnabled,o=e.cancelUpload,a=e.localize,c=e.mobile,l=e.persistKey,u=e.sendFiles,f=e.isSendingFileEvents,b=e.setAlternativeText,m=e.themeName,g=e.scrollToBottom,h=Object(K.l)(),v=Object(K.l)(),j=i.useState(!0),O=j[0],x=j[1],y=i.useState(!1),w=y[0],k=y[1],E=i.useState(!1),A=E[0],C=E[1],S=i.useState(null),T=S[0],_=S[1],z=i.useState(""),I=z[0],R=z[1],M=i.useRef(null),P=i.useRef(null),F=function(e,t){var n=e.filter((function(e){return e.failed})),r=e.filter((function(e){return e.finished})).length,i=n.length,o=e.length,a=t("file_upload_status").replace("%finishedCount%",String(r)).replace("%totalCount%",String(o));switch(!0){case i>0:return{failedCount:i,uploadStatus:"error",title:i>1?t("files_failed_to_upload").replace("%files%",String(i)):n[0].failReason};case r===o:return{uploadStatus:"success",title:a};default:return{uploadStatus:"pending",title:a}}}(t,a),D="error"===F.uploadStatus&&t.length===F.failedCount,B=function(){I&&R("")},q=i.useCallback((function(){return c||"modern"!==m?249:228}),[m,c]),H=i.useCallback((function(e){return(t.length>2||e?q():201)+"px"}),[t,q]),L=i.useCallback((function(e){N(e)&&(M.current.style.maxHeight=e)}),[]),U=function(e){return P.current.style.height=e},N=function(e){return M.current.style.maxHeight!==e},V=i.useCallback((function(){O?(k(!0),L("0px")):x(!0)}),[O,L]),W=function(e){if(O){var t=H(!!e);!e&&N(t)?(_(null),C(!0),U(P.current.clientHeight+"px"),L(t)):(L(q()+"px"),_(e))}else _(e)},G=i.useCallback((function(){w?(x(!1),k(!1)):A&&(U("auto"),C(!1))}),[w,A]);return i.useEffect((function(){t.length&&O&&!w&&L(H(!!T))}),[t.length,O,w,L,H,T]),i.useEffect((function(){if(Object(Or.b)("session")){var e=function(){Object(d.G)(t)||function(e,t){var n=e.filter((function(e){return e.finished})).map((function(e){return Object(s.a)({},e,{url:e.serverUrl})}));Object(d.G)(n)||window.sessionStorage.setItem(t,JSON.stringify(n))}(t,l)};return window.addEventListener("beforeunload",e),function(){return window.removeEventListener("beforeunload",e)}}}),[t,l]),Object(r.d)(ti,{isEdit:T,expanded:!w&&O,mobile:c},Object(r.d)(p.b,{message:F.title,clearOnUnmount:!0,"aria-live":"error"===F.uploadStatus?"assertive":"polite"}),Object(r.d)(Jr,{onClick:function(e){e.stopPropagation(),V()}},T?Object(r.d)(yr.w,{"aria-label":"go back to upload list",onPress:function(){W(null)}},Object(r.d)(yr.a,{size:24,css:ri,"aria-hidden":!0})):Object(r.d)(i.Fragment,null,"pending"===F.uploadStatus?Object(r.d)(sr.a,{size:"medium","aria-hidden":!0}):"success"===F.uploadStatus?Object(r.d)(Tr,{success:!0},Object(r.d)(yr.bb,{size:24,"aria-label":"Upload success"})):Object(r.d)(Tr,{error:!0},Object(r.d)(yr.c,{size:24,"aria-label":"Upload error"}))),Object(r.d)(Yr,Object(s.a)({id:v,flexFill:!0,ellipsis:!0},"error"===F.uploadStatus&&{failed:!0,title:F.title}),T?a("add_alternative_text"):F.title),Object(r.d)(yr.w,{css:ei,"aria-label":"Toggle upload list","aria-controls":h,"aria-expanded":O,onPress:V,autoFocus:!0},Object(r.d)(yr.x,{size:24,"aria-hidden":!0},Object(r.d)($r,{direction:O&&!w?"down":"up",size:24})))),O&&!w&&Object(r.d)(Zr,null),Object(r.d)(Kr,{ref:M,onTransitionEnd:G,longAnimation:!O||w},O&&Object(r.d)(Qr,{id:h,edit:!!T,ref:P},T?Object(r.d)(Wr,Object(s.a)({titleId:v},t.find((function(e){return e.id===T})),{onAlternativeTextChanged:function(e){W(null),b(T,e)},mobile:c})):Object(r.d)(i.Fragment,null,Object(r.d)(Xr,{mobile:c},t.map((function(e){return Object(r.d)(Fr,Object(s.a)({},e,{key:e.id,mobile:c,failed:!!e.failed,insistHover:I===e.id,onHoverChange:B,onCancel:!f||e.failed?function(){return function(e){if(!c&&t.length>1){var n=Object(d.q)((function(t){return t.id===e}),t),r=n===t.length-1;R(t[n+(r?-1:1)].id)}o(e)}(e.id)}:null,onAlternativeTextEdit:f?null:function(){return W(e.id)}}))}))),Object(r.d)(tr.a,{onClick:function(){u(),g({duration:0})},disabled:D||!n,pending:f||"pending"===F.uploadStatus,css:ni},a("send_files"))))))}));var ai=Object(f.A)("div",{target:"ezpiwsd0"})({name:"1u57r43",styles:"position:absolute;bottom:0;left:0;right:0;z-index:100"}),ci=Object(o.c)((function(e,t){var n=t.markAsSeen,r=function(){l.w(c.d,Date.now(),e).reverse().forEach((function(e){return n(e.id)}))};return function(e){var t=!Object(d.G)(l.r(e)),n=e.getApplicationState("mobile"),i=l.j(e,c.d),o=e.getUnseenCount(c.d),a=i&&i.properties?i.properties.text:null;return{isFileUploadAllowed:l.ib(e),isFileUploadPossible:l.P(e),isUploadingFiles:t,previewText:a,unseenCount:o,mobile:n,markAllEventsAsSeen:r,localize:e.localize}}}))((function(e){var t=e.isFileUploadAllowed,n=e.isFileUploadPossible,r=e.isUploadingFiles,o=e.previewText,c=e.unseenCount,l=e.chatId,s=e.mobile,u=e.scrollToBottom,d=e.markAllEventsAsSeen,f=e.isOnBottomSource,m=e.isScrollable,g=e.localize,v=o,j=Object(a.v)(f),O=c>0&&!j&&m,x=i.useState(O),y=x[0],w=x[1];return v||(v=g(c>1?"new_messages":"new_message")),!O&&y&&w(!1),i.useEffect((function(){if(O){var e=setTimeout((function(){return w(!0)}),300);return function(){return clearTimeout(e)}}}),[O]),i.createElement(ai,null,i.createElement(b.a,{appear:!0,component:null},t&&r&&i.createElement(h.a,{key:"upload"},i.createElement(oi,{scrollToBottom:u,chatId:l,uploadEnabled:n})),y&&i.createElement(h.a,{key:"unseen"},i.createElement(B.W,{text:v,stickToEdge:s,unseenCount:c,onClick:u,onClose:d}))),y&&i.createElement(p.b,{message:v,clearOnUnmount:!0,"aria-live":"assertive"}))})),li=function(e){var t=Object(u.g)().Maximized.css.background;return i.createElement(sr.a,Object(s.a)({},e,{adjustToColor:t,ariaLabel:"Loading previous messages"}))};var si=Object(f.A)("div",{target:"e1fh44if0"})({name:"1f0bicm",styles:"padding:1em;display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:0.9em"}),ui=function(e){return i.createElement(si,null,i.createElement(tr.a,e))},di=Object(o.c)((function(e){var t=function(){return g.N(e)},n=function(){return g.O(e,c.d)};return function(e){var r="startChatAgain"===l.i(e,c.d),i=e.getChat(c.d).properties,o=i.starting,a=i.startChatAgainPending,s=e.localize(r?"embedded_start_chat_again":"embedded_greeting_accept");return{startAction:r?n:t,buttonLabel:s,isPending:o||a}}}))((function(e){var t=e.isPending,n=e.buttonLabel,r=e.startAction,o=e.onClick,a=void 0===o?d.W:o;return i.createElement(ui,{disabled:t,pending:t,onClick:function(e){r(),a(e)}},n)}));function fi(){var e=Object(j.a)(["\n\t\t&-enter,\n\t\t&-appear {\n\t\t\tclip-path: circle(0% at 50% 50%);\n\t\t\topacity: 0;\n\t\t}\n\t\t&-enter-active,\n\t\t&-appear-active,\n\t\t&-enter-done,\n\t\t&-appear-done {\n\t\t\tclip-path: circle(150% at 50% 50%);\n\t\t\topacity: 1;\n\t\t\ttransition-property: opacity, clip-path;\n\t\t\ttransition-duration: 600ms;\n\t\t\ttransition-timing-function: ease-out;\n\t\t\twill-change: opacity, clip-path;\n\t\t}\n\t\t&-exit {\n\t\t\tclip-path: circle(150% at 50% 50%);\n\t\t\topacity: 1;\n\t\t}\n\t\t&-exit-active {\n\t\t\tclip-path: circle(0% at 50% 50%);\n\t\t\topacity: 0;\n\t\t\ttransition-property: opacity, clip-path;\n\t\t\ttransition-duration: 600ms;\n\t\t\ttransition-timing-function: ease-out;\n\t\t\twill-change: opacity, clip-path;\n\t\t}\n\t"]);return fi=function(){return e},e}var bi=Object(f.A)("div",{target:"ekftid72"})((function(e){return e.theme.typography.caption}),";position:absolute;display:flex;flex-direction:row;height:40px;z-index:10;left:50%;top:14px;transform:translate(-50%, 0);max-width:100%;white-space:nowrap;background-color:",(function(e){return e.theme.colors.surface}),";color:",(function(e){return e.theme.colors.primaryTextColor}),";border-radius:20px;box-shadow:",(function(e){return e.theme.boxShadow.floating}),";"),mi=Object(f.A)("div",{target:"ekftid71"})("flex-grow:1;flex-shrink:0;overflow:hidden;text-overflow:ellipsis;max-width:230px;padding:",(function(e){return e.theme.spaces.space5}),";"),pi=Object(f.A)("div",{target:"ekftid70"})("display:flex;flex-direction:row;justify-content:center;align-items:center;padding-right:",(function(e){return e.theme.spaces.space2}),";button{font-size:2em;border-radius:50%;width:32px;height:32px;margin-left:4px;background-color:",(function(e){return e.theme.colors.lighterOppositeTitleBarColor}),";}"),gi=function(e){return e(fi())},hi=Object(o.c)((function(e,t){var n=t.chatId;return{shouldShow:Object(l.rb)(e),chatId:n}}))((function(e){var t=e.isAgentBarExpandedSource,n=e.chatId,c=e.shouldShow,l=Object(a.v)(t),s=Object(i.useState)(!1),u=s[0],d=s[1];return Object(r.d)(o.a,null,(function(e){return Object(r.d)(r.a,null,(function(t){var i=t.css;return Object(r.d)(O.a,{in:!l&&c||u,classNames:gi(i),timeout:100,unmountOnExit:!0,mountOnEnter:!0},Object(r.d)(bi,null,Object(r.d)(mi,null,e("rate_agent")),Object(r.d)(pi,null,Object(r.d)(Be,{chatId:n,variant:"small",onRatingCommentModalStateChange:d,source:"prompt"}))))}))}))})),vi=n(676),ji=n(137);var Oi=Object(f.A)("div",{target:"ei7go8f1"})("position:absolute;bottom:0;left:0;right:0;background:",(function(e){return e.theme.colors.caution}),";z-index:2;color:",(function(e){return e.theme.colors.cautionContrast}),";text-align:center;font-size:0.9em;line-height:2.8em;transform:translateY(100%);"),xi=Object(f.A)("div",{target:"ei7go8f0"})({name:"obt24",styles:"flex-grow:1;height:100%;position:relative;min-height:0;-webkit-overflow-scrolling:touch"}),yi={name:"jddw9f",styles:"position:absolute;bottom:0;left:50%;z-index:3;transform:translate(-50%, 50%)"},wi=function(e){return e.events[0].id},ki=function(e){return 0!==e.length?wi(e[0]):void 0},Ei=function(e){var t=Object(d.N)(e);if(t){var n=Object(d.N)(t.events);if(n)return n.id}};var Ai=Object(m.a)([function(e,t){return e.getTimeline(t)},d.D],(function(e,t){var n=l.J(t);return e.map((function(e,r){var i=0===r,o=e.showDate&&!i&&n;return Object(s.a)({},e,{isThreadBoundary:o,authorData:t.getUser(e.author)})}))}))((function(e,t){return t})),Ci=Object(o.c)((function(e,t){var n=t.id,r=e.getApplicationState("isPreview")?d.W:function(){g.L(e)},i=e.localize,o=function(){return e.updateChat(n,{properties:{loadingHistory:!0}})},a=function(t){return e.requestUpdateEvent(n,t,{seen:!0}).catch(d.W)},c=function(t,r){g.E(e,n,t,r)},s=function(t){var r=t.eventId,i=t.buttonId,o=l.b(e);e.sendEvent(n,{type:"rich_message_postback",thread:o,properties:{eventId:r,postback:{id:i,toggled:!0}}},void 0)},u=function(t){return l.T(e,t)},f=function(t){return g.J(e,t)},b=function(t){return g.T(e,{properties:t})},m=function(t){var n=t.event,r=t.button;return g.r(e,n,r)};return function(e){var t=e.getChat(n),d=t.active,p=t.properties,g=p.agentIsTyping,h=p.loadingHistory,v=p.queued,j=p.ended,O=l.d(n,e),x=l.B(e,n),y=e.getUnseenCount(n),w=l.J(e)&&l.ab(e);return{agent:O,active:d,ended:j,loadHistory:o,isThreadStickerEnabled:w,hasMoreHistory:x,markAsSeen:a,sendMessage:c,queued:v,sendPostback:s,showPrechat:r,localize:i,updateSessionUser:b,showMoment:f,unseenCount:y,timeline:Ai(e,n,e.getState()),activeQuickReply:l.u(n,e),agentIsTyping:g&&!!O,shouldLoadHistory:x&&!h,isLoadingHistory:h,showAvatar:l.h("agentAvatar",e).enabled,pageFocused:e.getApplicationState("pageFocused"),inputMode:l.i(e,n),reconnecting:l.sb(e),displayOfflineInformation:l.pb(e),lastSeenEvent:y>0&&e.getLastSeenAgentEvent(n),isGreeting:u,handleRichGreetingButtonClicked:m}}}))((function(e){var t=e,n=t.displayOfflineInformation,o=t.active,l=t.ended,m=t.activeQuickReply,g=t.agent,v=t.isThreadStickerEnabled,j=t.hasMoreHistory,O=t.pageFocused,x=t.id,y=t.inputMode,w=t.loadHistory,k=t.localize,E=t.queued,A=t.reconnecting,S=t.shouldLoadHistory,T=t.showAvatar,_=t.showPrechat,z=t.timeline,I=t.agentIsTyping,R=t.mobile,P=t.unseenCount,F=t.lastSeenEvent,B=t.sendMessage,q=t.showMoment,H=t.handleRichGreetingButtonClicked,U=t.isOnBottomSource,N=t.isAgentBarExpandedSource,V=t.isLoadingHistory,W=i.useRef(null),G=i.useRef(null),Y=Object(a.w)(!1),J=i.useRef(!1),K=i.useState(P),Q=K[0],X=K[1],Z=i.useState("hidden"),$=Z[0],ee=Z[1],te=i.useState(O),ne=te[0],re=te[1],ie=i.useState(F)[0],oe=Object(a.c)((function(){return function(e,t,n,r){return e.some((function(e){return e.type===c.h}))?"draft":t?"newMessageDivider":r||n||!e.some((function(e){return e.events.some((function(e){return"boosters"===e.type}))}))?"form":"boosters"}(z,Q,o,l)})),ae=Object(a.d)(A),ce="modern"!==Object(u.g)().name&&T,le="modern"===Object(u.g)().name;i.useEffect((function(){!O&&ne?re(!1):O&&!ne&&re(!0)}),[O,ne]);var se=i.useCallback((function(e){e&&S&&w()}),[S,w]),ue=i.useCallback((function(e){U.next(e),re(!0)}),[U]),de=i.useCallback((function(e){e.deltaY>5&&N.next(!1)}),[N]),fe=Object(a.t)(W,{firstItemKey:ki(z),lastItemKey:Ei(z),onIsScrolledToTopChanged:se,onIsScrolledToBottomChanged:ue,onIsUserScrollingChanged:Y.next,onScrollDeltaChanged:de}),be=fe.scrollToTop,me=fe.scrollToBottom,pe=fe.getIsOnBottom,ge=fe.onWheel,he=fe.onTouchStart,ve=fe.getIsScrollable,je=fe.setScrollTargetNode,Oe=i.useCallback((function(e){pe()&&me(e)}),[pe,me]),xe=i.useCallback((function(){Oe({duration:0})}),[Oe]),ye=function(e){return void 0===e&&(e=d.W),function(){me({duration:0}),e()}},we=Object(a.q)((function(){pe()?me():me({duration:0}),N.next(!1),X(0)})),ke=function(e){var t=i.useRef(e);return i.useEffect((function(){t.current=e})),i.useMemo((function(){return{handleActionButtonClick:function(e){var n=e.button,r=e.event,i=t.current,o=i.active,a=i.showMoment,c=i.sendPostback,l=i.sendMessage,s=i.handleSendMessage,u=i.isGreeting,d=i.handleRichGreetingButtonClicked;if(u(r))return d({event:r,button:n}),void("message"===n.type&&s());if(o)switch(n.type){case"webview":return c({eventId:r,buttonId:n.postbackId}),void a({url:n.value,height:n.webviewHeight,source:"rich_message"});case"message":return l(n.text,{type:"action_button",event:r,button:n}),void s();case"copy":return void Object(ji.a)(n.value);default:return void c({eventId:r,buttonId:n.postbackId})}},markAsSeen:function(e){return t.current.markAsSeen(e)}}}),[])}(Object(s.a)({},e,{handleSendMessage:we})),Ee=i.useCallback((function(e){J.current=e}),[]),Ae=!!(I||E||m||n),Ce=i.useCallback((function(e){var t;N.get()&&G.current&&(G.current.contains(e.target)||e.target===window.document||(null==(t=e.target)?void 0:t.closest('button, label, input, [role="menuitem"], textarea'))||W.current&&W.current.contains(e.target)&&N.next(!1))}),[N]);return i.useEffect((function(){var e=N.subscribe((function(e){e&&requestAnimationFrame((function(){Oe({duration:0})}))}));return function(){return e()}}),[N,Oe]),i.useEffect((function(){Ae&&Oe()}),[Ae,Oe]),i.useEffect((function(){if(R){var e=function(){J.current&&me({duration:0})};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}}),[R,me]),i.useEffect((function(){return ee("auto")}),[]),Object(a.s)({mainElementRef:W,itemsCount:z.reduce((function(e,t){return e+t.events.length}),0),tableEdgeReached:function(e){"previous"===e&&be({duration:0})}}),Object(r.d)(C,{isOnBottomSource:U,beginingOfTime:z.length>0?z[0].timestamp:null,rootRef:W},Object(r.d)(f.f,{noShrink:!0},Object(r.d)(Pt,{chatId:x,isOnBottomSource:U,isAgentBarExpandedSource:N,isLoadingHistory:V,wrapperRef:G},v&&Object(r.d)(M,{css:yi,isUserScrollingSource:Y}),A&&!ae&&Object(r.d)(i.Fragment,null,Object(r.d)(p.b,{message:k("reconnecting"),clearOnUnmount:!0,"aria-live":"assertive"}),Object(r.d)(Oi,null,k("reconnecting")+"\u2026")))),Object(r.d)(b.a,{appear:!0,component:null},Object(r.d)(h.d,null,Object(r.d)(xi,{onClick:Ce},Object(r.d)(ci,{chatId:x,isScrollable:ve(),isOnBottomSource:U,scrollToBottom:me,markAsSeen:ke.markAsSeen}),Object(r.d)(hi,{isAgentBarExpandedSource:N,chatId:x}),Object(r.d)(f.k,{active:ne,css:function(e){return function(e){var t=e.theme,n=e.overflow;return Object(r.c)("background:transparent;overscroll-behavior:contain;overflow-y:",t.isRtl?n:"auto",";position:absolute;top:0;bottom:0;left:0;right:0;")}({theme:e,overflow:$})},onWheel:ge,onTouchStart:he,ref:W},j&&Object(r.d)(f.q,null,Object(r.d)(li,{size:"medium",style:{margin:"auto"}})),z.map((function(e){return Object(r.d)(i.Fragment,{key:wi(e)},e.isThreadBoundary&&Object(r.d)(D,{timestamp:e.timestamp}),ie&&Q>0&&e.events.some((function(e){return e.id===ie.id}))&&Object(r.d)(L,{unseenCount:Q,setScrollTargetNode:je}),Object(r.d)(vi.a,null,Object(r.d)(f.j,Object(s.a)({isOwn:e.own,isCarousel:"carousel"===e.type,onlyFirstWithMeta:!0},ce&&e.authorData.avatar&&{avatar:e.authorData.avatar}),e.events.map((function(t,n){return Object(r.d)(Ft.a,Object(s.a)({chatId:x,id:t.id,key:t.id,showMetaOnClick:!le||0!==n,radiusType:e.radiusType,listItemHandlers:ke,scrollTarget:oe,showMoment:q,scrollToBottom:me,increasedAvatarPadding:"carousel"===t.type&&ce},!Q&&{setScrollTargetNode:je}))})))))})),m&&Object(r.d)("div",{role:"row"},Object(r.d)("div",{role:"gridcell"},Object(r.d)(Dt.b,{"aria-labelledby":m.id,onSelect:function(e){var t=m.properties.quickReplies[e];m.properties.invitation?H({event:m.id,button:t}):B(t.text,{type:"quick_reply",event:m.id,button:t}),we()},replies:m.properties.quickReplies}))),I&&Object(r.d)(i.Fragment,null,Object(r.d)(p.b,{clearOnUnmount:!0,"aria-live":"polite",message:k("operator_is_typing",{operator:g.name}).replace("...","")}),Object(r.d)(b.a,{appear:!0,component:null},Object(r.d)(h.a,{exit:!1},Object(r.d)(jr.b,{avatar:ce?g.avatar:null})))))))),"requestPrechat"===y?Object(r.d)(ui,{onClick:ye(_)},k("embedded_greeting_accept")):"startChat"===y||"startChatAgain"===y?Object(r.d)(di,{onClick:ye()}):"text"===y?Object(r.d)(hn,{chatId:x,onSendMessage:we,onHeightChange:xe,onFocusChange:Ee}):null,Object(r.d)(vr,{chatId:x,onSendMessage:we}))}));function Si(){var e=Object(j.a)(["\n\t&-enter,\n\t&-appear {\n\t\topacity: 0;\n\t}\n\n\t&-enter&-enter-active,\n\t&-appear&-appear-active {\n\t\topacity: 1;\n\t\ttransition: opacity ","ms ",";\n\t}\n\n\t&-exit {\n\t\topacity: 1;\n\t}\n\n\t&-exit&-exit-active {\n\t\topacity: 0;\n\t\ttransition: opacity ","ms ",";\n\t}\n"]);return Si=function(){return e},e}var Ti=Object(f.A)("div",{displayName:"View",section:!0,target:"e1u2umur1"})({name:"73jfg1",styles:"flex-grow:1;display:flex;height:100%;min-height:0;padding-bottom:1em"}),_i=Object(f.A)("div",{displayType:"ViewContent",target:"e1u2umur0"})("overflow-y:auto;height:100%;flex-grow:1;padding:",(function(e){return e.full?"0 !important":"1em 1em 0 1em"}),";"),zi=function(e,t){return e(Si(),200,t.transitions.easings.sharp,200,t.transitions.easings.sharp)},Ii={name:"1d3w5wq",styles:"width:100%"},Ri=function(e){var t=e.children,n=e.full,i=void 0!==n&&n;return Object(r.d)(Ti,null,Object(r.d)(r.a,null,(function(e){var n=e.css,o=e.theme;return Object(r.d)(b.a,{css:Ii},Object(r.d)(O.a,{appear:!0,classNames:zi(n,o),timeout:200},Object(r.d)(_i,{full:i},t)))})))},Mi=Object(f.A)(f.c,{target:"ea4v29u0"})("background-color:",(function(e){return e.theme.colors.surface}),";"),Pi=function(){return i.createElement(o.a,null,(function(e){return i.createElement(Ri,null,i.createElement(Mi,null,i.createElement(f.m,null,e("lost_connection"))))}))};function Fi(){var e=Object(j.a)(["\n\t50% {\n\t\topacity: 0.0;\n\t}\n"]);return Fi=function(){return e},e}var Di=Object(r.e)(Fi()),Bi=Object(r.c)("background:currentColor;opacity:0.3;animation:",Di," 1.5s linear 0s infinite;"),qi=Object(r.c)(Bi,";"),Hi=Object(f.A)("div",{target:"e1uut4cd4"})("width:",(function(e){return e.width||"10em"}),";height:1em;margin:0.3em;border-radius:",(function(e){return e.theme.borderRadius.sm}),";",Bi,";"),Li=Object(f.A)("div",{target:"e1uut4cd3"})({name:"1d3w5wq",styles:"width:100%"}),Ui=Object(f.A)("div",{target:"e1uut4cd2"})({name:"66u5jz",styles:"padding:1em"}),Ni=Object(f.A)("div",{target:"e1uut4cd1"})({name:"10qv9sv",styles:"width:100%;margin-top:0.5em"}),Vi=Object(f.A)("div",{displayName:"Message",section:!0,target:"e1uut4cd0"})(""),Wi=function(){return Object(r.d)(Ri,{full:!0},Object(r.d)(Li,null,Object(r.d)(f.a,null,Object(r.d)(f.b,{css:qi,letter:" "})),Object(r.d)(Ui,null,Object(r.d)(Ni,null,Object(r.d)(f.q,null,Object(r.d)(Vi,null,Object(r.d)(f.c,null,Object(r.d)(f.m,null,Object(r.d)(Hi,null),Object(r.d)(Hi,{width:"7em"})))))),Object(r.d)(Ni,null,Object(r.d)(f.q,{reverse:!0},Object(r.d)(Vi,null,Object(r.d)(f.c,null,Object(r.d)(f.m,null,Object(r.d)(Hi,null)))))),Object(r.d)(Ni,null,Object(r.d)(f.q,null,Object(r.d)(Vi,null,Object(r.d)(f.c,null,Object(r.d)(f.m,null,Object(r.d)(Hi,null)))))))))},Gi=n(649);var Yi=Object(f.A)("div",{target:"e5cxvfk0"})({name:"iwp08z",styles:"display:flex;justify-content:center;font-size:0.9em"});var Ji="close_chat_confirm_label",Ki=Object(f.A)("p",{target:"ev8wfi81"})({name:"1azakc",styles:"text-align:center"}),Qi=Object(f.A)(B.s,{target:"ev8wfi80"})("&:hover{background-color:",(function(e){return e.theme.colors.lighterOppositeTitleBarColor}),";}"),Xi=function(e){var t=e.localize,n=e.closeChat,r=e.onModalStateChange,o=i.useState(!1),a=o[0],c=o[1],l=i.useState(!1),s=l[0],u=l[1],d=Object(je.b)(),f=function(){c(!1),r({isOpen:!1})};return i.createElement(i.Fragment,null,i.createElement(ce,{description:t("close_chat")},i.createElement(Qi,{onPress:function(){c(!0),r({isOpen:!0})},"aria-label":t("close_chat")},i.createElement(B.h,{"aria-hidden":!0}))),i.createElement(Ae,{shown:a,onClose:f,"aria-labelledby":Ji},i.createElement(ze,{"aria-hidden":!0},i.createElement(B.o,null)),i.createElement(Ki,{id:Ji},t("leave_chat_confirm")),i.createElement(Yi,null,i.createElement(Gi.i,{destructive:!0,label:t("close_chat"),submitting:s,onClick:function(){d?f():(u(!0),n().then((function(){u(!1),f()})).catch((function(){u(!1)})))}}))))},Zi=n(650),$i=n(668),eo=n(659);var to="email-transcript-sent-label",no="email-transcript-not-sent-label",ro=Object(f.A)("h2",{target:"emwx8nd0"})({name:"xvo3ou",styles:"text-align:center;font-size:16px;font-weight:normal"}),io=function(e){var t=e.email,n=e.localize,r=e.sent,o=e.open,c=e.onClose,l=e.onSubmit,s=e.mobile,u=Object(a.h)("email-transcript"),b=i.useState((function(){return{email:t}})),m=b[0],p=b[1];return i.useEffect((function(){if(o){var e=u.get();p(e||{email:t})}}),[u,t,o]),i.createElement(Ae,{shown:o,onClose:c,"aria-labelledby":r?to:no},o&&(r?i.createElement(i.Fragment,null,i.createElement(ze,{"aria-hidden":!0},i.createElement(B.x,null)),i.createElement(ro,{id:to,textWrap:!0},n("chat_transcript_sent").replace(/%s/g,t||"")),i.createElement(Yi,null,i.createElement(tr.a,{capitalize:!0,onClick:c},n("hide")))):i.createElement(i.Fragment,null,i.createElement(ze,{"aria-hidden":!0},i.createElement(B.x,null)),i.createElement(ro,{id:no},n("send_transcript_to_email")),i.createElement(Ce.a,{id:"email_transcript",initialValues:m,mobile:s,onSubmit:function(e){return Math.random()<.01&&Object(Gt.d)("chat_transcript_ordered",{}),l(e.email).then((function(){return u.destroy()})).catch((function(){var e;return(e={})[eo.a]=n("lost_connection"),e}))},submitLabel:n("send"),validate:function(e){return e.email?{}:{email:n("survey_fill_in_required_fields")}}},i.createElement(f.q,null,i.createElement(Zi.c,{onChange:function(e){var t=e.values;e.dirty&&u.set(t)}}),i.createElement($i.a,{ariaLabel:"Enter your email address",name:"email",required:!0,serverName:"",label:"",type:"email",localize:d.D}))))))},oo=Object(f.A)("div",{target:"eleibs71"})("display:flex;position:relative;width:44px;height:24px;border-radius:24px;background-color:",(function(e){return e.theme.colors.inactiveElement}),";will-change:background-color;transition:background-color 0.2s linear;cursor:pointer;outline-offset:2px;&::after{content:'';position:absolute;height:16px;width:16px;border-radius:16px;top:4px;left:4px;background-color:",(function(e){return e.theme.colors.surface}),";will-change:left;transition:left 0.2s ease-in;}"),ao=Object(f.A)("input",{target:"eleibs70"})("position:absolute;left:2137px;&:checked+div{background-color:",(function(e){return e.theme.colors.success}),";&::after{left:24px;}}"),co=function(e){var t=e.checked,n=Object(v.a)(e,["checked"]);return i.createElement(i.Fragment,null,i.createElement(ao,Object(s.a)({type:"checkbox",checked:t},n)),i.createElement(oo,null))};function lo(){var e=Object(j.a)(["\n\t&-enter {\n\t\topacity: ",";\n\n\t\t[role='menuitem'],\n\t\t[role='switch'] {\n\t\t\ttransform: translate3d(0, 20%, 0);\n\t\t}\n\t}\n\n\t&-enter-active {\n\t\topacity: 1;\n\t\ttransition: opacity 100ms ease-in-out;\n\t\t[role='menuitem'],\n\t\t[role='switch'] {\n\t\t\ttransform: translate3d(0, 0%, 0);\n\t\t\ttransition: transform 200ms;\n\t\t}\n\t}\n\n\t&-exit {\n\t\topacity: 1;\n\t}\n\n\t&-exit-active {\n\t\topacity: 0;\n\t\ttransition: opacity 100ms ease-in-out;\n\t}\n"]);return lo=function(){return e},e}var so=function(e){return Object(r.c)("margin-"+(e.isRtl?"left":"right")+": 8px;","")},uo=Object(f.A)("div",{target:"e1s5h2c81"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),fo=Object(f.A)(cn,{target:"e1s5h2c80"})({name:"2o6p8u",styles:"justify-content:space-between"}),bo=function(e){return e(lo(),"0.00001")},mo=Object(o.c)((function(e){var t=c.d,n=function(n){return e.requestUpdateChat(t,{properties:{transcriptSentTo:n}})},r=function(){e.setApplicationState({muted:!e.getApplicationState("muted")})};return function(e){var i=e.getChat(t),o=i.active,a=i.properties,s=a.transcriptSentTo,u=Object(Kn.a)(e,"floating-menu");return{localize:e.localize,muted:e.getApplicationState("muted"),sendTranscript:n,transcriptSentTo:s,enableTranscript:!e.getApplicationState("isPreview")&&(o||a.ended),showTranscript:Object(l.h)("emailTranscript",e).enabled,toggleSounds:r,chatTransfer:u,customerEmail:e.getSessionUser().email,showVoiceAssistant:function(){return Object(g.J)(e,{url:c.n})}}}}))((function(e){var t=e.customerEmail,n=e.enableTranscript,o=e.localize,l=e.muted,s=e.sendTranscript,d=e.showTranscript,f=e.toggleSounds,m=e.chatTransfer,p=e.transcriptSentTo,g=e.showVoiceAssistant,h=i.useState(!1),v=h[0],j=h[1],x=i.useState(!1),y=x[0],w=x[1],k=Object(V.useFrame)(),E=Object(u.g)(),A=Object(Oe.b)();Object(a.g)(k);var C=i.useRef(null),S=!!p,T=i.useCallback((function(e){switch(e){case"sounds":return void f();case"transcript":return j(!1),void w(!0);case"identityTransfer":return Object(Gt.d)("chat_app_button_clicked",{ui_source:"menu"}),j(!1),void m.showMoment();case"voiceAssistant":j(!1),g()}}),[f,m,g]);return Object(a.p)((function(){v&&Math.random()<.01&&Object(Gt.d)("meatballs_menu_opened",{})}),[v]),i.useEffect((function(){return A.setMenuOpen(v)}),[v,A]),Object(r.d)(i.Fragment,null,Object(r.d)(ce,{isDisabled:v,description:o("theme_options")},Object(r.d)(B.s,{css:Object(r.c)("padding:0;height:32px;background-color:",v?E.colors.lighterOppositeTitleBarColor:"transparent",";&:hover{background-color:",E.colors.lighterOppositeTitleBarColor,";}"),ref:C,onPress:function(){return j((function(e){return!e}))},active:v,"aria-label":v?"Close menu":"Open menu","aria-expanded":v,"aria-haspopup":!0},Object(r.d)(B.j,{"aria-hidden":!0,color:"modern"===E.name?E.colors.titleBarText:E.colors.agentBarText}))),Object(r.d)(r.a,null,(function(e){var t=e.css;return Object(r.d)(b.a,{component:null},v&&Object(r.d)(O.a,{classNames:bo(t),timeout:200},Object(r.d)(on,{menuButtonRef:C,onClose:function(){return j(!1)},onSelect:T},d&&Object(r.d)(cn,{disabled:!n,text:o("send_transcript"),value:"transcript"},Object(r.d)(B.x,{css:so(E),"aria-hidden":!0}),o("send_transcript")),m.available&&Object(r.d)(cn,{text:c.j,value:"identityTransfer",disabled:m.disabled},Object(r.d)(B.z,{css:so(E),"aria-hidden":!0}),c.j),Object(r.d)(fo,{text:o(l?"unmute":"mute"),"aria-label":l?o("sounds")+" "+o("unmute"):o("sounds")+" "+o("mute"),value:"sounds"},Object(r.d)(uo,null,l?Object(r.d)(B.A,{css:so(E),"aria-hidden":!0}):Object(r.d)(B.U,{css:so(E),"aria-hidden":!0}),Object(r.d)("span",{"aria-hidden":!0},o("sounds"))),Object(r.d)(co,{checked:!l,onChange:function(){return!l},"aria-hidden":!0})),!1)))})),Object(r.d)(io,{email:S?p:t,localize:o,onClose:function(){return w(!1)},onSubmit:s,sent:S,open:y}))})),po=n(231);var go=window.matchMedia("(max-height: 330px)"),ho=function(e,t,n){return function(i){return Object(r.c)("overflow:hidden;flex-grow:0;text-align:left;padding:0 0.8em;font-weight:700;display:flex;align-items:center;transition:0.3s background-color;z-index:",e?103:2,";pointer-events:",e?"none":"all",";box-shadow:",t?i.boxShadow.md:"none",";",n&&Object(r.c)("box-shadow:",i.boxShadow.enormous,";"),";transition:box-shadow 200ms ",i.transitions.easings.smooth,";")}},vo=Object(f.A)("div",{displayName:"IconPlaceholder",target:"e7bf83j5"})({name:"febvbf",styles:"width:25px;flex-shrink:0"}),jo=function(e){return Object(r.c)("font-size:inherit;font-weight:700;margin-top:0;margin-bottom:0;transition:opacity 100ms ",e.transitions.easings.smooth,";")},Oo=Object(f.A)(Ne,{target:"e7bf83j4"})({name:"1693thf",styles:"margin-right:5px"}),xo=Object(f.A)("h1",{target:"e7bf83j3"})((function(e){var t=e.theme;return jo(t)}),";"),yo={name:"1l53zi",styles:"pointer-events:none;opacity:0;cursor:auto"},wo={name:"4uq5vb",styles:"pointer-events:all;opacity:1;cursor:pointer"},ko=Object(f.A)("button",{target:"e7bf83j2"})((function(e){var t=e.theme;return jo(t)})," margin:0 auto;padding:6px;border-radius:",(function(e){return e.theme.borderRadius.def}),";display:flex;flex-direction:row;justify-content:center;align-items:center;position:relative;color:inherit;background:none;border:none;appearance:none;max-width:100%;transition:none;",(function(e){var t=e.show,n=e.focused;return t||n?wo:yo}),";&:hover{background-color:",(function(e){return e.theme.colors.lighterOppositeTitleBarColor}),";}"),Eo=Object(f.A)(B.s,{target:"e7bf83j1"})("&:hover{background-color:",(function(e){return e.theme.colors.lighterOppositeTitleBarColor}),";}"),Ao=Object(f.A)("div",{target:"e7bf83j0"})(""),Co=function(e){return Object(d.hb)(e-1).map((function(e){return Object(r.d)(vo,{key:"placeholder_"+e})}))},So={name:"21xn5r",styles:"transform:rotate(180deg)"},To=Object(o.c)((function(e){var t=function(){return e.requestUpdateChat(c.d,{active:!1})},n=function(){e.setCurrentView("Homescreen")},r=e.getApplicationState("embedded");return function(e){var i=Object(l.d)(c.d,e),o=Object(l.mb)(e),a=function(e,t){if(e&&e.name&&t)return e.name}(i,o),s=!(Object(l.qb)(e)||Object(l.pb)(e))&&a;return{embedded:r,closeChat:t,title:e.localize("welcome_title"),titleWithAgentData:a,agent:i,shouldShowTitleWithAgentData:s,showCloseButton:e.getChat(c.d).active,localize:e.localize,showAgentBar:o,showAvatar:Object(l.h)("agentAvatar",e).enabled,isDropAreaVisible:e.getApplicationState("dropAreaVisible"),showBackButton:"Homescreen"===e.getDefaultView(),goToHomescreen:n,showRatingPrompt:Object(l.rb)(e)}}}))((function(e){var t=e.showCloseButton,n=e.closeChat,o=e.localize,c=e.showMinimizedButton,l=e.title,d=e.titleWithAgentData,b=e.onMinimize,m=e.showAgentBar,p=e.shouldShowTitleWithAgentData,g=e.agent,h=e.showAvatar,v=e.isDropAreaVisible,j=e.showBackButton,O=e.goToHomescreen,x=e.isAgentBarExpandedSource,y=e.showRatingPrompt,w=Object(u.g)(),k=i.useRef(),E=i.useRef(),A=i.useRef(),C=i.useRef(go.matches),S=i.useState(!1),T=S[0],_=S[1],z=Object(Y.e)(),I=z.isFocusVisible,R=z.focusProps,M=w.name,P=Object(a.v)(x),F=y&&!P,D=i.useCallback((function(){x.next(!P)}),[p,x,P]);i.useEffect((function(){var e=function(e){var t=e.matches;return C.current=t};return go.addListener(e),function(){return go.removeListener(e)}}),[]);var q=function(e,t){var n=e.filter(Boolean),r=t.filter(Boolean);return n.length===r.length?{leftIcons:n,rightIcons:r}:n.length>r.length?{leftIcons:n,rightIcons:Co(n.length-r.length).concat(r)}:{leftIcons:n.concat(Co(r.length-n.length)),rightIcons:r}}([j&&Object(r.d)(Eo,{"aria-label":"Go back to homescreen",key:"back",onPress:O},Object(r.d)(po.a,{"aria-hidden":!0,css:So})),Object(r.d)(mo,{key:"menu"})],[c&&Object(r.d)(ce,{key:"minimize",description:o("embedded_minimize_window")},Object(r.d)(Eo,{onPress:b,"aria-label":o("embedded_minimize_window")},Object(r.d)(B.y,{"aria-hidden":!0}))),(t||T)&&Object(r.d)(Xi,{key:"close",closeChat:n,localize:o,onModalStateChange:function(e){var t=e.isOpen;return _(t)}})]),H=q.leftIcons,L=q.rightIcons,U="modern"===M?"small":"normal",N=p&&!P;return Object(r.d)(f.x,{css:ho(v,N,F),leftIcons:H,noShrink:!0,rightIcons:L,title:Object(r.d)(Ao,{ref:A},!p&&!m&&l&&Object(r.d)(xo,null,l),p&&Object(r.d)(ko,Object(s.a)({show:!P},R,{focused:I,ref:E,onClick:D,"aria-expanded":P,"aria-controls":lt}),!(P&&m)&&Object(r.d)(i.Fragment,null,!P&&g&&m&&h&&Object(r.d)(Oo,{avatarUrl:g.avatar,size:U,availability:"online"}),!P&&g&&!h&&Object(r.d)(Oo,{size:U,availability:"online"}),Object(r.d)(xo,{ref:k,ellipsis:!0},Object(r.d)(qe.a,null,d))),P&&Object(r.d)("span",null,"Collapse")))})})),_o=n(680),zo=n(677),Io=i.lazy((function(){return n.e(5).then(n.bind(null,696))}));t.default=Object(o.c)((function(e){return{destroyed:e.getApplicationState().destroyed,showLoader:Object(l.nb)(e),defaultWidget:e.getApplicationState().defaultWidget,currentView:e.getCurrentView()}}))((function(e){var t=e.destroyed,n=e.showLoader,i=e.currentView,o=e.defaultWidget,l=e.onMinimizeButtonPress,s=e.showMinimizedButton,u=Object(a.w)(!0),d=Object(a.w)(!0);return t?Object(r.d)(Pi,null):"openwidget"===o&&i&&"Chat"!==i?Object(r.d)(Io,{currentView:i}):n?Object(r.d)(Wi,null):Object(r.d)(zo.a,null,Object(r.d)(To,{isOnBottomSource:u,onMinimize:l,showMinimizedButton:s,isAgentBarExpandedSource:d}),Object(r.d)(Ci,{id:c.d,isOnBottomSource:u,isAgentBarExpandedSource:d}),Object(r.d)(_o.a,null))}))}}]);